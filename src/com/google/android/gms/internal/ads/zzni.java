package com.google.android.gms.internal.ads;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.ConditionVariable;
import android.support.annotation.Nullable;
import com.google.android.gms.common.GooglePlayServicesUtilLight;
import javax.annotation.ParametersAreNonnullByDefault;

@zzadh
@ParametersAreNonnullByDefault
public final class zzni {
  private final Object mLock = new Object();
  
  private final ConditionVariable zzatv = new ConditionVariable();
  
  @Nullable
  private SharedPreferences zzatw = null;
  
  private Context zzatx;
  
  public final void initialize(Context paramContext) {
    if (this.zzzv)
      return; 
    synchronized (this.mLock) {
      Context context;
      if (this.zzzv)
        return; 
      if (paramContext.getApplicationContext() == null) {
        context = paramContext;
      } else {
        context = paramContext.getApplicationContext();
      } 
      this.zzatx = context;
      try {
        Context context1 = GooglePlayServicesUtilLight.getRemoteContext(paramContext);
        context = context1;
        if (context1 == null) {
          context = context1;
          if (paramContext != null) {
            context1 = paramContext.getApplicationContext();
            context = context1;
            if (context1 == null)
              context = paramContext; 
          } 
        } 
        if (context == null)
          return; 
        zzkb.zzii();
        this.zzatw = context.getSharedPreferences("google_ads_flags", 0);
        this.zzzv = true;
        return;
      } finally {
        this.zzatv.open();
      } 
    } 
  }
  
  public final <T> T zzd(zzna<T> paramzzna) {
    if (this.zzatv.block(5000L)) {
      if (!this.zzzv || this.zzatw == null)
        synchronized (this.mLock) {
          Object object;
          if (!this.zzzv || this.zzatw == null) {
            object = paramzzna.zzja();
            return (T)object;
          } 
          return (T)zzaml.zza(this.zzatx, new zznj(this, object));
        }  
      return (T)zzaml.zza(this.zzatx, new zznj(this, paramzzna));
    } 
    throw new IllegalStateException("Flags.initialize() was not called!");
  }
}
