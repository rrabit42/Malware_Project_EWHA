package com.bumptech.glide.manager;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.IntentFilter;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

class DefaultConnectivityMonitor implements ConnectivityMonitor {
  private final BroadcastReceiver connectivityReceiver = new Object(this);
  
  private final Context context;
  
  private boolean isConnected;
  
  private boolean isRegistered;
  
  private final ConnectivityMonitor.ConnectivityListener listener;
  
  public DefaultConnectivityMonitor(Context paramContext, ConnectivityMonitor.ConnectivityListener paramConnectivityListener) {
    this.context = paramContext.getApplicationContext();
    this.listener = paramConnectivityListener;
  }
  
  private boolean isConnected(Context paramContext) {
    NetworkInfo networkInfo = ((ConnectivityManager)paramContext.getSystemService("connectivity")).getActiveNetworkInfo();
    return (networkInfo != null && networkInfo.isConnected());
  }
  
  private void register() {
    if (this.isRegistered)
      return; 
    this.isConnected = isConnected(this.context);
    this.context.registerReceiver(this.connectivityReceiver, new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE"));
    this.isRegistered = true;
  }
  
  private void unregister() {
    if (!this.isRegistered)
      return; 
    this.context.unregisterReceiver(this.connectivityReceiver);
    this.isRegistered = false;
  }
  
  public void onDestroy() {}
  
  public void onStart() { register(); }
  
  public void onStop() { unregister(); }
}
