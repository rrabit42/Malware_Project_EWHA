package com.google.android.gms.internal.ads;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Handler;
import android.support.annotation.Nullable;
import android.text.TextUtils;
import android.util.Log;
import android.view.MotionEvent;
import android.view.ViewConfiguration;
import android.view.WindowManager;
import com.google.android.gms.ads.internal.zzbv;
import com.google.android.gms.common.util.VisibleForTesting;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

@zzadh
public final class zzald {
  private Handler handler;
  
  private final Context mContext;
  
  private int state = 0;
  
  private String zzaej;
  
  private final float zzbwx;
  
  @Nullable
  private String zzchz;
  
  private String zzcrx;
  
  private float zzcry;
  
  private float zzcrz;
  
  private float zzcsa;
  
  private int zzcsb;
  
  private float zzcsc;
  
  private float zzcsd;
  
  private float zzcse;
  
  private float zzcsf;
  
  private Runnable zzcsg = new zzale(this);
  
  private String zzye;
  
  public zzald(Context paramContext) {
    this.mContext = paramContext;
    this.zzbwx = (paramContext.getResources().getDisplayMetrics()).density;
    this.zzcsb = ViewConfiguration.get(this.mContext).getScaledTouchSlop();
    zzbv.zzez().zzsa();
    this.handler = zzbv.zzez().getHandler();
  }
  
  public zzald(Context paramContext, String paramString) {
    this(paramContext);
    this.zzcrx = paramString;
  }
  
  private static int zza(List<String> paramList, String paramString, boolean paramBoolean) {
    if (!paramBoolean)
      return -1; 
    paramList.add(paramString);
    return paramList.size() - 1;
  }
  
  @VisibleForTesting
  private final void zza(int paramInt, float paramFloat1, float paramFloat2) {
    if (paramInt == 0) {
      this.state = 0;
      this.zzcry = paramFloat1;
      this.zzcrz = paramFloat2;
      this.zzcsa = paramFloat2;
      return;
    } 
    int i = this.state;
    if (i == -1)
      return; 
    if (paramInt == 2) {
      if (paramFloat2 > this.zzcrz) {
        this.zzcrz = paramFloat2;
      } else if (paramFloat2 < this.zzcsa) {
        this.zzcsa = paramFloat2;
      } 
      if (this.zzcrz - this.zzcsa > this.zzbwx * 30.0F) {
        this.state = -1;
        return;
      } 
      paramInt = this.state;
      if ((paramInt == 2) ? (paramFloat1 - this.zzcry >= this.zzbwx * 50.0F) : ((paramInt == 1 || paramInt == 3) && paramFloat1 - this.zzcry <= this.zzbwx * -50.0F)) {
        this.zzcry = paramFloat1;
        this.state++;
      } 
      paramInt = this.state;
      if (paramInt == 1 || paramInt == 3) {
        if (paramFloat1 > this.zzcry) {
          this.zzcry = paramFloat1;
          return;
        } 
        return;
      } 
      if (paramInt == 2 && paramFloat1 < this.zzcry) {
        this.zzcry = paramFloat1;
        return;
      } 
    } else if (paramInt == 1 && i == 4) {
      showDialog();
    } 
  }
  
  private final boolean zza(float paramFloat1, float paramFloat2, float paramFloat3, float paramFloat4) { return (Math.abs(this.zzcsc - paramFloat1) < this.zzcsb && Math.abs(this.zzcsd - paramFloat2) < this.zzcsb && Math.abs(this.zzcse - paramFloat3) < this.zzcsb && Math.abs(this.zzcsf - paramFloat4) < this.zzcsb); }
  
  private final void zzrs() {
    if (!(this.mContext instanceof android.app.Activity)) {
      zzakb.zzdj("Can not create dialog without Activity Context");
      return;
    } 
    String str = this.zzcrx;
    if (!TextUtils.isEmpty(str)) {
      str = str.replaceAll("\\+", "%20");
      Uri uri = (new Uri.Builder()).encodedQuery(str).build();
      StringBuilder stringBuilder = new StringBuilder();
      Map map = zzbv.zzek().zzg(uri);
      for (String str2 : map.keySet()) {
        stringBuilder.append(str2);
        stringBuilder.append(" = ");
        stringBuilder.append((String)map.get(str2));
        stringBuilder.append("\n\n");
      } 
      String str1 = stringBuilder.toString().trim();
      if (!TextUtils.isEmpty(str1)) {
        AlertDialog.Builder builder1 = new AlertDialog.Builder(this.mContext);
        builder1.setMessage(str1);
        builder1.setTitle("Ad Information");
        builder1.setPositiveButton("Share", new zzalg(this, str1));
        builder1.setNegativeButton("Close", zzalh.zzcsl);
        builder1.create().show();
        return;
      } 
    } 
    str = "No debug information";
    AlertDialog.Builder builder = new AlertDialog.Builder(this.mContext);
    builder.setMessage(str);
    builder.setTitle("Ad Information");
    builder.setPositiveButton("Share", new zzalg(this, str));
    builder.setNegativeButton("Close", zzalh.zzcsl);
    builder.create().show();
  }
  
  public final void setAdUnitId(String paramString) { this.zzye = paramString; }
  
  public final void showDialog() {
    try {
      String str2;
      String str1 = zznk.zzbec;
      if (!((Boolean)zzkb.zzik().zzd(str1)).booleanValue()) {
        str1 = zznk.zzbeb;
        if (!((Boolean)zzkb.zzik().zzd(str1)).booleanValue()) {
          zzrs();
          return;
        } 
      } 
      if (!(this.mContext instanceof android.app.Activity)) {
        zzakb.zzdj("Can not create dialog without Activity Context");
        return;
      } 
      if (!TextUtils.isEmpty(zzbv.zzeu().zzrw())) {
        String str = "Creative Preview (Enabled)";
      } else {
        str1 = "Creative Preview";
      } 
      if (zzbv.zzeu().zzrx()) {
        str2 = "Troubleshooting (Enabled)";
      } else {
        str2 = "Troubleshooting";
      } 
      ArrayList arrayList = new ArrayList();
      int i = zza(arrayList, "Ad Information", true);
      zzna zzna2 = zznk.zzbeb;
      int j = zza(arrayList, str1, ((Boolean)zzkb.zzik().zzd(zzna2)).booleanValue());
      zzna zzna1 = zznk.zzbec;
      int k = zza(arrayList, str2, ((Boolean)zzkb.zzik().zzd(zzna1)).booleanValue());
      AlertDialog.Builder builder = new AlertDialog.Builder(this.mContext, zzbv.zzem().zzrq());
      builder.setTitle("Select a Debug Mode").setItems((CharSequence[])arrayList.toArray(new String[0]), new zzalf(this, i, j, k));
      builder.create().show();
      return;
    } catch (android.view.WindowManager.BadTokenException badTokenException) {
      if (zzakb.zzqp())
        Log.v("Ads", "", badTokenException); 
      return;
    } 
  }
  
  public final void zzda(String paramString) { this.zzaej = paramString; }
  
  public final void zzdb(String paramString) { this.zzcrx = paramString; }
  
  public final void zzdc(String paramString) { this.zzchz = paramString; }
  
  public final void zze(MotionEvent paramMotionEvent) {
    Handler handler1;
    zzna zzna = zznk.zzbed;
    if (((Boolean)zzkb.zzik().zzd(zzna)).booleanValue()) {
      int j = paramMotionEvent.getActionMasked();
      int m = paramMotionEvent.getHistorySize();
      int k = paramMotionEvent.getPointerCount();
      if (j == 0) {
        this.state = 0;
        this.zzcsc = paramMotionEvent.getX();
        this.zzcsd = paramMotionEvent.getY();
        return;
      } 
      int n = this.state;
      if (n != -1) {
        int i1 = 1;
        if (n == 0 && j == 5) {
          this.state = 5;
          this.zzcse = paramMotionEvent.getX(1);
          this.zzcsf = paramMotionEvent.getY(1);
          handler1 = this.handler;
          Runnable runnable = this.zzcsg;
          zzna zzna1 = zznk.zzbee;
          handler1.postDelayed(runnable, ((Long)zzkb.zzik().zzd(zzna1)).longValue());
          return;
        } 
        if (this.state == 5) {
          if (k != 2) {
            j = i1;
          } else if (j == 2) {
            k = 0;
            j = 0;
            while (k < m) {
              if (!zza(handler1.getHistoricalX(0, k), handler1.getHistoricalY(0, k), handler1.getHistoricalX(1, k), handler1.getHistoricalY(1, k)))
                j = 1; 
              k++;
            } 
            if (!zza(handler1.getX(), handler1.getY(), handler1.getX(1), handler1.getY(1)))
              j = i1; 
          } else {
            j = 0;
          } 
          if (j != 0) {
            this.state = -1;
            this.handler.removeCallbacks(this.zzcsg);
          } 
        } 
      } 
      return;
    } 
    int i = handler1.getHistorySize();
    for (byte b = 0; b < i; b++)
      zza(handler1.getActionMasked(), handler1.getHistoricalX(0, b), handler1.getHistoricalY(0, b)); 
    zza(handler1.getActionMasked(), handler1.getX(), handler1.getY());
  }
}
