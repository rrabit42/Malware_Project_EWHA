package com.google.android.gms.internal.ads;

import android.support.annotation.Nullable;
import android.text.TextUtils;
import com.google.android.gms.ads.internal.zzbv;
import com.google.android.gms.common.util.VisibleForTesting;
import java.util.LinkedHashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import javax.annotation.ParametersAreNonnullByDefault;

@zzadh
@ParametersAreNonnullByDefault
public final class zznx {
  private final Object mLock = new Object();
  
  @VisibleForTesting
  private boolean zzbgn;
  
  private final List<zznv> zzbgo = new LinkedList();
  
  private final Map<String, String> zzbgp = new LinkedHashMap();
  
  private String zzbgq;
  
  @Nullable
  private zznx zzbgr;
  
  public zznx(boolean paramBoolean, String paramString1, String paramString2) {
    this.zzbgn = paramBoolean;
    this.zzbgp.put("action", paramString1);
    this.zzbgp.put("ad_format", paramString2);
  }
  
  public final boolean zza(zznv paramzznv, long paramLong, String... paramVarArgs) {
    synchronized (this.mLock) {
      int i = paramVarArgs.length;
      byte b;
      for (b = 0; b < i; b++) {
        zznv zznv1 = new zznv(paramLong, paramVarArgs[b], paramzznv);
        this.zzbgo.add(zznv1);
      } 
      return true;
    } 
  }
  
  public final boolean zza(@Nullable zznv paramzznv, String... paramVarArgs) { return (!this.zzbgn || paramzznv == null) ? false : zza(paramzznv, zzbv.zzer().elapsedRealtime(), paramVarArgs); }
  
  public final void zzan(String paramString) {
    if (!this.zzbgn)
      return; 
    synchronized (this.mLock) {
      this.zzbgq = paramString;
      return;
    } 
  }
  
  public final void zzc(@Nullable zznx paramzznx) {
    synchronized (this.mLock) {
      this.zzbgr = paramzznx;
      return;
    } 
  }
  
  @Nullable
  public final zznv zzd(long paramLong) { return !this.zzbgn ? null : new zznv(paramLong, null, null); }
  
  public final void zze(String paramString1, String paramString2) {
    if (this.zzbgn) {
      if (TextUtils.isEmpty(paramString2))
        return; 
      zznn zznn = zzbv.zzeo().zzpy();
      if (zznn == null)
        return; 
      synchronized (this.mLock) {
        zznr zznr = zznn.zzal(paramString1);
        Map map = this.zzbgp;
        map.put(paramString1, zznr.zzd((String)map.get(paramString1), paramString2));
        return;
      } 
    } 
  }
  
  public final zznv zzjj() { return zzd(zzbv.zzer().elapsedRealtime()); }
  
  public final String zzjk() {
    null = new StringBuilder();
    synchronized (this.mLock) {
      for (zznv zznv : this.zzbgo) {
        long l = zznv.getTime();
        String str = zznv.zzjg();
        zznv = zznv.zzjh();
        if (zznv != null && l > 0L) {
          long l1 = zznv.getTime();
          null.append(str);
          null.append('.');
          null.append(l - l1);
          null.append(',');
        } 
      } 
      this.zzbgo.clear();
      if (!TextUtils.isEmpty(this.zzbgq)) {
        null.append(this.zzbgq);
      } else if (null.length() > 0) {
        null.setLength(null.length() - 1);
      } 
      return null.toString();
    } 
  }
  
  @VisibleForTesting
  final Map<String, String> zzjl() {
    synchronized (this.mLock) {
      null = zzbv.zzeo().zzpy();
      if (null == null || this.zzbgr == null)
        return this.zzbgp; 
      return null.zza(this.zzbgp, this.zzbgr.zzjl());
    } 
  }
  
  public final zznv zzjm() {
    synchronized (this.mLock) {
      return null;
    } 
  }
}
