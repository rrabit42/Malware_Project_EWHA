package androidx.work.impl.constraints.trackers;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.support.annotation.NonNull;
import android.support.annotation.RestrictTo;
import androidx.work.Logger;

@RestrictTo({RestrictTo.Scope.LIBRARY_GROUP})
public abstract class BroadcastReceiverConstraintTracker<T> extends ConstraintTracker<T> {
  private static final String TAG = Logger.tagWithPrefix("BrdcstRcvrCnstrntTrckr");
  
  private final BroadcastReceiver mBroadcastReceiver = new Object(this);
  
  public BroadcastReceiverConstraintTracker(Context paramContext) { super(paramContext); }
  
  public abstract IntentFilter getIntentFilter();
  
  public abstract void onBroadcastReceive(Context paramContext, @NonNull Intent paramIntent);
  
  public void startTracking() {
    Logger.get().debug(TAG, String.format("%s: registering receiver", new Object[] { getClass().getSimpleName() }), new Throwable[0]);
    this.mAppContext.registerReceiver(this.mBroadcastReceiver, getIntentFilter());
  }
  
  public void stopTracking() {
    Logger.get().debug(TAG, String.format("%s: unregistering receiver", new Object[] { getClass().getSimpleName() }), new Throwable[0]);
    this.mAppContext.unregisterReceiver(this.mBroadcastReceiver);
  }
}
