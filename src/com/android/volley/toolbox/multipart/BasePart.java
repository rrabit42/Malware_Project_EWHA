package com.android.volley.toolbox.multipart;

import com.android.volley.misc.MultipartUtils;
import org.apache.http.util.ByteArrayBuffer;
import org.apache.http.util.EncodingUtils;

abstract class BasePart implements Part {
  private byte[] header;
  
  protected IHeadersProvider headersProvider;
  
  private static void append(ByteArrayBuffer paramByteArrayBuffer, String paramString) { append(paramByteArrayBuffer, EncodingUtils.getAsciiBytes(paramString)); }
  
  private static void append(ByteArrayBuffer paramByteArrayBuffer, byte[] paramArrayOfByte) { paramByteArrayBuffer.append(paramArrayOfByte, 0, paramArrayOfByte.length); }
  
  private byte[] generateHeader(Boundary paramBoundary) {
    if (this.headersProvider != null) {
      ByteArrayBuffer byteArrayBuffer = new ByteArrayBuffer(256);
      append(byteArrayBuffer, paramBoundary.getStartingBoundary());
      append(byteArrayBuffer, this.headersProvider.getContentDisposition());
      append(byteArrayBuffer, MultipartUtils.CRLF_BYTES);
      append(byteArrayBuffer, this.headersProvider.getContentType());
      append(byteArrayBuffer, MultipartUtils.CRLF_BYTES);
      append(byteArrayBuffer, MultipartUtils.CRLF_BYTES);
      return byteArrayBuffer.toByteArray();
    } 
    throw new RuntimeException("Uninitialized headersProvider");
  }
  
  protected byte[] getHeader(Boundary paramBoundary) {
    if (this.header == null)
      this.header = generateHeader(paramBoundary); 
    return this.header;
  }
}
