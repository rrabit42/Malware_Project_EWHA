package com.google.android.gms.internal.ads;

import android.content.Context;
import android.os.Binder;
import android.os.Handler;
import android.os.RemoteException;
import android.support.annotation.Nullable;
import com.google.android.gms.ads.internal.zzbv;
import javax.annotation.concurrent.GuardedBy;

@zzadh
public final class zzhd {
  @Nullable
  @GuardedBy("mLock")
  private Context mContext;
  
  private final Object mLock = new Object();
  
  private final Runnable zzajq = new zzhe(this);
  
  @Nullable
  @GuardedBy("mLock")
  private zzhk zzajr;
  
  @Nullable
  @GuardedBy("mLock")
  private zzho zzajs;
  
  private final void connect() {
    synchronized (this.mLock) {
      if (this.mContext == null || this.zzajr != null)
        return; 
      zzhg zzhg = new zzhg(this);
      zzhh zzhh = new zzhh(this);
      this.zzajr = new zzhk(this.mContext, zzbv.zzez().zzsa(), zzhg, zzhh);
      this.zzajr.checkAvailabilityAndConnect();
      return;
    } 
  }
  
  private final void disconnect() {
    synchronized (this.mLock) {
      if (this.zzajr == null)
        return; 
      if (this.zzajr.isConnected() || this.zzajr.isConnecting())
        this.zzajr.disconnect(); 
      this.zzajr = null;
      this.zzajs = null;
      Binder.flushPendingCommands();
      return;
    } 
  }
  
  public final void initialize(Context paramContext) {
    if (paramContext == null)
      return; 
    synchronized (this.mLock) {
      if (this.mContext != null)
        return; 
      this.mContext = paramContext.getApplicationContext();
      zzna zzna = zznk.zzbdo;
      if (((Boolean)zzkb.zzik().zzd(zzna)).booleanValue()) {
        connect();
      } else {
        zzna = zznk.zzbdn;
        if (((Boolean)zzkb.zzik().zzd(zzna)).booleanValue()) {
          zzhf zzhf = new zzhf(this);
          zzbv.zzen().zza(zzhf);
        } 
      } 
      return;
    } 
  }
  
  public final zzhi zza(zzhl paramzzhl) {
    synchronized (this.mLock) {
      if (this.zzajs == null)
        return new zzhi(); 
      try {
        return this.zzajs.zza(null);
      } catch (RemoteException null) {
        zzakb.zzb("Unable to call into cache service.", null);
        return new zzhi();
      } 
    } 
  }
  
  public final void zzhh() {
    zzna zzna = zznk.zzbdp;
    if (((Boolean)zzkb.zzik().zzd(zzna)).booleanValue())
      synchronized (this.mLock) {
        connect();
        zzbv.zzek();
        zzakk.zzcrm.removeCallbacks(this.zzajq);
        zzbv.zzek();
        Handler handler = zzakk.zzcrm;
        Runnable runnable = this.zzajq;
        zzna zzna1 = zznk.zzbdq;
        handler.postDelayed(runnable, ((Long)zzkb.zzik().zzd(zzna1)).longValue());
        return;
      }  
  }
}
