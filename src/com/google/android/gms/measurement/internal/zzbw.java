package com.google.android.gms.measurement.internal;

import android.app.Application;
import android.content.Context;
import android.support.annotation.WorkerThread;
import android.text.TextUtils;
import com.google.android.gms.common.api.internal.GoogleServices;
import com.google.android.gms.common.internal.Preconditions;
import com.google.android.gms.common.util.Clock;
import com.google.android.gms.common.util.DefaultClock;
import com.google.android.gms.common.util.VisibleForTesting;
import com.google.android.gms.common.wrappers.Wrappers;
import com.google.android.gms.internal.measurement.zzsi;
import com.google.android.gms.measurement.AppMeasurement;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.atomic.AtomicReference;

public class zzbw implements zzct {
  private final boolean zzadg;
  
  private final String zzadi;
  
  private final long zzago;
  
  private final zzn zzaih;
  
  private final String zzaph;
  
  private final String zzapi;
  
  private final zzq zzapj;
  
  private final zzbd zzapk;
  
  private final zzas zzapl;
  
  private final zzbr zzapm;
  
  private final zzfd zzapn;
  
  private final AppMeasurement zzapo;
  
  private final zzfy zzapp;
  
  private final zzaq zzapq;
  
  private final zzdy zzapr;
  
  private final zzda zzaps;
  
  private final zza zzapt;
  
  private zzao zzapu;
  
  private zzeb zzapv;
  
  private zzaa zzapw;
  
  private zzam zzapx;
  
  private zzbj zzapy;
  
  private Boolean zzapz;
  
  private long zzaqa;
  
  @VisibleForTesting
  private Boolean zzaqc;
  
  @VisibleForTesting
  private Boolean zzaqd;
  
  private int zzaqe;
  
  private AtomicInteger zzaqf = new AtomicInteger(0);
  
  private final Context zzri;
  
  private final Clock zzrz;
  
  private boolean zzvz = false;
  
  private zzbw(zzcz paramzzcz) {
    Preconditions.checkNotNull(paramzzcz);
    this.zzaih = new zzn(paramzzcz.zzri);
    zzai.zza(this.zzaih);
    this.zzri = paramzzcz.zzri;
    this.zzadi = paramzzcz.zzadi;
    this.zzaph = paramzzcz.zzaph;
    this.zzapi = paramzzcz.zzapi;
    this.zzadg = paramzzcz.zzadg;
    this.zzaqb = paramzzcz.zzaqb;
    zzan zzan = paramzzcz.zzaqw;
    if (zzan != null && zzan.zzadj != null) {
      Object object2 = zzan.zzadj.get("measurementEnabled");
      if (object2 instanceof Boolean)
        this.zzaqc = (Boolean)object2; 
      Object object1 = zzan.zzadj.get("measurementDeactivated");
      if (object1 instanceof Boolean)
        this.zzaqd = (Boolean)object1; 
    } 
    zzsi.zzae(this.zzri);
    this.zzrz = DefaultClock.getInstance();
    this.zzago = this.zzrz.currentTimeMillis();
    this.zzapj = new zzq(this);
    zzbd zzbd1 = new zzbd(this);
    zzbd1.zzq();
    this.zzapk = zzbd1;
    zzas zzas1 = new zzas(this);
    zzas1.zzq();
    this.zzapl = zzas1;
    zzfy zzfy1 = new zzfy(this);
    zzfy1.zzq();
    this.zzapp = zzfy1;
    zzaq zzaq1 = new zzaq(this);
    zzaq1.zzq();
    this.zzapq = zzaq1;
    this.zzapt = new zza(this);
    zzdy zzdy1 = new zzdy(this);
    zzdy1.zzq();
    this.zzapr = zzdy1;
    zzda zzda1 = new zzda(this);
    zzda1.zzq();
    this.zzaps = zzda1;
    this.zzapo = new AppMeasurement(this);
    zzfd zzfd1 = new zzfd(this);
    zzfd1.zzq();
    this.zzapn = zzfd1;
    zzbr zzbr1 = new zzbr(this);
    zzbr1.zzq();
    this.zzapm = zzbr1;
    zzn zzn1 = this.zzaih;
    if (this.zzri.getApplicationContext() instanceof Application) {
      zzda zzda2 = zzgj();
      if (zzda2.getContext().getApplicationContext() instanceof Application) {
        Application application = (Application)zzda2.getContext().getApplicationContext();
        if (zzda2.zzaqx == null)
          zzda2.zzaqx = new zzdu(zzda2, null); 
        application.unregisterActivityLifecycleCallbacks(zzda2.zzaqx);
        application.registerActivityLifecycleCallbacks(zzda2.zzaqx);
        zzda2.zzgt().zzjo().zzby("Registered activity lifecycle callback");
      } 
    } else {
      zzgt().zzjj().zzby("Application context is not an Application");
    } 
    this.zzapm.zzc(new zzbx(this, paramzzcz));
  }
  
  public static zzbw zza(Context paramContext, zzan paramzzan) { // Byte code:
    //   0: aload_1
    //   1: astore_2
    //   2: aload_1
    //   3: ifnull -> 52
    //   6: aload_1
    //   7: getfield origin : Ljava/lang/String;
    //   10: ifnull -> 22
    //   13: aload_1
    //   14: astore_2
    //   15: aload_1
    //   16: getfield zzadi : Ljava/lang/String;
    //   19: ifnonnull -> 52
    //   22: new com/google/android/gms/measurement/internal/zzan
    //   25: dup
    //   26: aload_1
    //   27: getfield zzade : J
    //   30: aload_1
    //   31: getfield zzadf : J
    //   34: aload_1
    //   35: getfield zzadg : Z
    //   38: aload_1
    //   39: getfield zzadh : Ljava/lang/String;
    //   42: aconst_null
    //   43: aconst_null
    //   44: aload_1
    //   45: getfield zzadj : Landroid/os/Bundle;
    //   48: invokespecial <init> : (JJZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;Landroid/os/Bundle;)V
    //   51: astore_2
    //   52: aload_0
    //   53: invokestatic checkNotNull : (Ljava/lang/Object;)Ljava/lang/Object;
    //   56: pop
    //   57: aload_0
    //   58: invokevirtual getApplicationContext : ()Landroid/content/Context;
    //   61: invokestatic checkNotNull : (Ljava/lang/Object;)Ljava/lang/Object;
    //   64: pop
    //   65: getstatic com/google/android/gms/measurement/internal/zzbw.zzapg : Lcom/google/android/gms/measurement/internal/zzbw;
    //   68: ifnonnull -> 111
    //   71: ldc com/google/android/gms/measurement/internal/zzbw
    //   73: monitorenter
    //   74: getstatic com/google/android/gms/measurement/internal/zzbw.zzapg : Lcom/google/android/gms/measurement/internal/zzbw;
    //   77: ifnonnull -> 99
    //   80: new com/google/android/gms/measurement/internal/zzbw
    //   83: dup
    //   84: new com/google/android/gms/measurement/internal/zzcz
    //   87: dup
    //   88: aload_0
    //   89: aload_2
    //   90: invokespecial <init> : (Landroid/content/Context;Lcom/google/android/gms/measurement/internal/zzan;)V
    //   93: invokespecial <init> : (Lcom/google/android/gms/measurement/internal/zzcz;)V
    //   96: putstatic com/google/android/gms/measurement/internal/zzbw.zzapg : Lcom/google/android/gms/measurement/internal/zzbw;
    //   99: ldc com/google/android/gms/measurement/internal/zzbw
    //   101: monitorexit
    //   102: goto -> 151
    //   105: astore_0
    //   106: ldc com/google/android/gms/measurement/internal/zzbw
    //   108: monitorexit
    //   109: aload_0
    //   110: athrow
    //   111: aload_2
    //   112: ifnull -> 151
    //   115: aload_2
    //   116: getfield zzadj : Landroid/os/Bundle;
    //   119: ifnull -> 151
    //   122: aload_2
    //   123: getfield zzadj : Landroid/os/Bundle;
    //   126: ldc_w 'dataCollectionDefaultEnabled'
    //   129: invokevirtual containsKey : (Ljava/lang/String;)Z
    //   132: ifeq -> 151
    //   135: getstatic com/google/android/gms/measurement/internal/zzbw.zzapg : Lcom/google/android/gms/measurement/internal/zzbw;
    //   138: aload_2
    //   139: getfield zzadj : Landroid/os/Bundle;
    //   142: ldc_w 'dataCollectionDefaultEnabled'
    //   145: invokevirtual getBoolean : (Ljava/lang/String;)Z
    //   148: invokevirtual zzd : (Z)V
    //   151: getstatic com/google/android/gms/measurement/internal/zzbw.zzapg : Lcom/google/android/gms/measurement/internal/zzbw;
    //   154: areturn
    // Exception table:
    //   from	to	target	type
    //   74	99	105	finally
    //   99	102	105	finally
    //   106	109	105	finally }
  
  private static void zza(zzcr paramzzcr) {
    if (paramzzcr != null)
      return; 
    throw new IllegalStateException("Component not created");
  }
  
  private static void zza(zzcs paramzzcs) {
    if (paramzzcs != null) {
      if (paramzzcs.isInitialized())
        return; 
      String str;
      StringBuilder stringBuilder = new StringBuilder((str = String.valueOf(paramzzcs.getClass())).valueOf(str).length() + 27);
      stringBuilder.append("Component not initialized: ");
      stringBuilder.append(str);
      throw new IllegalStateException(stringBuilder.toString());
    } 
    throw new IllegalStateException("Component not created");
  }
  
  @WorkerThread
  private final void zza(zzcz paramzzcz) {
    zzgs().zzaf();
    zzq.zzhy();
    zzaa zzaa1 = new zzaa(this);
    zzaa1.zzq();
    this.zzapw = zzaa1;
    zzam zzam1 = new zzam(this);
    zzam1.zzq();
    this.zzapx = zzam1;
    zzao zzao1 = new zzao(this);
    zzao1.zzq();
    this.zzapu = zzao1;
    zzeb zzeb1 = new zzeb(this);
    zzeb1.zzq();
    this.zzapv = zzeb1;
    this.zzapp.zzgx();
    this.zzapk.zzgx();
    this.zzapy = new zzbj(this);
    this.zzapx.zzgx();
    zzgt().zzjm().zzg("App measurement is starting up, version", Long.valueOf(this.zzapj.zzhh()));
    zzn zzn1 = this.zzaih;
    zzgt().zzjm().zzby("To enable debug logging run: adb shell setprop log.tag.FA VERBOSE");
    zzn1 = this.zzaih;
    String str = zzam1.zzal();
    if (TextUtils.isEmpty(this.zzadi)) {
      zzau zzau;
      if (zzgr().zzcz(str)) {
        zzau = zzgt().zzjm();
        str = "Faster debug mode event logging enabled. To disable, run:\n  adb shell setprop debug.firebase.analytics.app .none.";
      } else {
        zzau = zzgt().zzjm();
        str = String.valueOf(str);
        if (str.length() != 0) {
          str = "To enable faster debug mode event logging run:\n  adb shell setprop debug.firebase.analytics.app ".concat(str);
        } else {
          str = new String("To enable faster debug mode event logging run:\n  adb shell setprop debug.firebase.analytics.app ");
        } 
      } 
      zzau.zzby(str);
    } 
    zzgt().zzjn().zzby("Debug-level message logging enabled");
    if (this.zzaqe != this.zzaqf.get())
      zzgt().zzjg().zze("Not all components initialized", Integer.valueOf(this.zzaqe), Integer.valueOf(this.zzaqf.get())); 
    this.zzvz = true;
  }
  
  private static void zza(zzf paramzzf) {
    if (paramzzf != null) {
      if (paramzzf.isInitialized())
        return; 
      String str;
      StringBuilder stringBuilder = new StringBuilder((str = String.valueOf(paramzzf.getClass())).valueOf(str).length() + 27);
      stringBuilder.append("Component not initialized: ");
      stringBuilder.append(str);
      throw new IllegalStateException(stringBuilder.toString());
    } 
    throw new IllegalStateException("Component not created");
  }
  
  private final void zzcl() {
    if (this.zzvz)
      return; 
    throw new IllegalStateException("AppMeasurement is not initialized");
  }
  
  public final Context getContext() { return this.zzri; }
  
  @WorkerThread
  public final boolean isEnabled() {
    boolean bool;
    zzgs().zzaf();
    zzcl();
    if (this.zzapj.zza(zzai.zzalc)) {
      if (this.zzapj.zzhz())
        return false; 
      Boolean bool2 = this.zzaqd;
      if (bool2 != null && bool2.booleanValue())
        return false; 
      bool2 = zzgu().zzjz();
      if (bool2 != null)
        return bool2.booleanValue(); 
      bool2 = this.zzapj.zzia();
      if (bool2 != null)
        return bool2.booleanValue(); 
      bool2 = this.zzaqc;
      return (bool2 != null) ? bool2.booleanValue() : (GoogleServices.isMeasurementExplicitlyDisabled() ? 0 : ((this.zzapj.zza(zzai.zzaky) && this.zzaqb != null) ? this.zzaqb.booleanValue() : 1));
    } 
    if (this.zzapj.zzhz())
      return false; 
    Boolean bool1 = this.zzapj.zzia();
    if (bool1 != null) {
      bool = bool1.booleanValue();
    } else {
      boolean bool2 = GoogleServices.isMeasurementExplicitlyDisabled() ^ true;
      bool = bool2;
      if (bool2) {
        bool = bool2;
        if (this.zzaqb != null) {
          bool = bool2;
          if (((Boolean)zzai.zzaky.get()).booleanValue())
            bool = this.zzaqb.booleanValue(); 
        } 
      } 
    } 
    return zzgu().zzh(bool);
  }
  
  @WorkerThread
  protected final void start() {
    zzgs().zzaf();
    if ((zzgu()).zzana.get() == 0L)
      (zzgu()).zzana.set(this.zzrz.currentTimeMillis()); 
    if (Long.valueOf((zzgu()).zzanf.get()).longValue() == 0L) {
      zzgt().zzjo().zzg("Persisting first open", Long.valueOf(this.zzago));
      (zzgu()).zzanf.set(this.zzago);
    } 
    if (!zzkv()) {
      if (isEnabled()) {
        if (!zzgr().zzx("android.permission.INTERNET"))
          zzgt().zzjg().zzby("App is missing INTERNET permission"); 
        if (!zzgr().zzx("android.permission.ACCESS_NETWORK_STATE"))
          zzgt().zzjg().zzby("App is missing ACCESS_NETWORK_STATE permission"); 
        zzn zzn1 = this.zzaih;
        if (!Wrappers.packageManager(this.zzri).isCallerInstantApp() && !this.zzapj.zzif()) {
          if (!zzbm.zza(this.zzri))
            zzgt().zzjg().zzby("AppMeasurementReceiver not registered/enabled"); 
          if (!zzfy.zza(this.zzri, false))
            zzgt().zzjg().zzby("AppMeasurementService not registered/enabled"); 
        } 
        zzgt().zzjg().zzby("Uploading is not possible. App measurement disabled");
        return;
      } 
    } else {
      zzn zzn1 = this.zzaih;
      if (!TextUtils.isEmpty(zzgk().getGmpAppId()) || !TextUtils.isEmpty(zzgk().zzhb())) {
        if (zzgr().zza(zzgk().getGmpAppId(), zzgu().zzjv(), zzgk().zzhb(), zzgu().zzjw())) {
          zzgt().zzjm().zzby("Rechecking which service to use due to a GMP App Id change");
          zzgu().zzjy();
          zzgn().resetAnalyticsData();
          this.zzapv.disconnect();
          this.zzapv.zzdj();
          (zzgu()).zzanf.set(this.zzago);
          (zzgu()).zzanh.zzcd(null);
        } 
        zzgu().zzcb(zzgk().getGmpAppId());
        zzgu().zzcc(zzgk().zzhb());
        if (this.zzapj.zzbi(zzgk().zzal()))
          this.zzapn.zzaj(this.zzago); 
      } 
      zzgj().zzcp((zzgu()).zzanh.zzkd());
      zzn1 = this.zzaih;
      if (!TextUtils.isEmpty(zzgk().getGmpAppId()) || !TextUtils.isEmpty(zzgk().zzhb())) {
        boolean bool = isEnabled();
        if (!zzgu().zzkc() && !this.zzapj.zzhz())
          zzgu().zzi(bool ^ true); 
        if (!this.zzapj.zzba(zzgk().zzal()) || bool)
          zzgj().zzld(); 
        zzgl().zza(new AtomicReference());
      } 
    } 
  }
  
  final void zzb(zzcs paramzzcs) { this.zzaqe++; }
  
  final void zzb(zzf paramzzf) { this.zzaqe++; }
  
  public final Clock zzbx() { return this.zzrz; }
  
  @WorkerThread
  final void zzd(boolean paramBoolean) { this.zzaqb = Boolean.valueOf(paramBoolean); }
  
  final void zzgf() {
    zzn zzn1 = this.zzaih;
    throw new IllegalStateException("Unexpected call on client side");
  }
  
  final void zzgg() { zzn zzn1 = this.zzaih; }
  
  public final zza zzgi() {
    zza zza1 = this.zzapt;
    if (zza1 != null)
      return zza1; 
    throw new IllegalStateException("Component not created");
  }
  
  public final zzda zzgj() {
    zza(this.zzaps);
    return this.zzaps;
  }
  
  public final zzam zzgk() {
    zza(this.zzapx);
    return this.zzapx;
  }
  
  public final zzeb zzgl() {
    zza(this.zzapv);
    return this.zzapv;
  }
  
  public final zzdy zzgm() {
    zza(this.zzapr);
    return this.zzapr;
  }
  
  public final zzao zzgn() {
    zza(this.zzapu);
    return this.zzapu;
  }
  
  public final zzfd zzgo() {
    zza(this.zzapn);
    return this.zzapn;
  }
  
  public final zzaa zzgp() {
    zza(this.zzapw);
    return this.zzapw;
  }
  
  public final zzaq zzgq() {
    zza(this.zzapq);
    return this.zzapq;
  }
  
  public final zzfy zzgr() {
    zza(this.zzapp);
    return this.zzapp;
  }
  
  public final zzbr zzgs() {
    zza(this.zzapm);
    return this.zzapm;
  }
  
  public final zzas zzgt() {
    zza(this.zzapl);
    return this.zzapl;
  }
  
  public final zzbd zzgu() {
    zza(this.zzapk);
    return this.zzapk;
  }
  
  public final zzq zzgv() { return this.zzapj; }
  
  public final zzn zzgw() { return this.zzaih; }
  
  public final zzas zzkj() {
    zzas zzas1 = this.zzapl;
    return (zzas1 != null && zzas1.isInitialized()) ? this.zzapl : null;
  }
  
  public final zzbj zzkk() { return this.zzapy; }
  
  final zzbr zzkl() { return this.zzapm; }
  
  public final AppMeasurement zzkm() { return this.zzapo; }
  
  public final boolean zzkn() { return TextUtils.isEmpty(this.zzadi); }
  
  public final String zzko() { return this.zzadi; }
  
  public final String zzkp() { return this.zzaph; }
  
  public final String zzkq() { return this.zzapi; }
  
  public final boolean zzkr() { return this.zzadg; }
  
  @WorkerThread
  public final boolean zzks() { return (this.zzaqb != null && this.zzaqb.booleanValue()); }
  
  final long zzkt() {
    Long long = Long.valueOf((zzgu()).zzanf.get());
    return (long.longValue() == 0L) ? this.zzago : Math.min(this.zzago, long.longValue());
  }
  
  final void zzku() { this.zzaqf.incrementAndGet(); }
  
  @WorkerThread
  protected final boolean zzkv() {
    zzcl();
    zzgs().zzaf();
    Boolean bool = this.zzapz;
    if (bool == null || this.zzaqa == 0L || (bool != null && !bool.booleanValue() && Math.abs(this.zzrz.elapsedRealtime() - this.zzaqa) > 1000L)) {
      this.zzaqa = this.zzrz.elapsedRealtime();
      zzn zzn1 = this.zzaih;
      boolean bool1 = zzgr().zzx("android.permission.INTERNET");
      boolean bool2 = true;
      if (bool1 && zzgr().zzx("android.permission.ACCESS_NETWORK_STATE") && (Wrappers.packageManager(this.zzri).isCallerInstantApp() || this.zzapj.zzif() || (zzbm.zza(this.zzri) && zzfy.zza(this.zzri, false)))) {
        bool1 = true;
      } else {
        bool1 = false;
      } 
      this.zzapz = Boolean.valueOf(bool1);
      if (this.zzapz.booleanValue()) {
        bool1 = bool2;
        if (!zzgr().zzu(zzgk().getGmpAppId(), zzgk().zzhb()))
          if (!TextUtils.isEmpty(zzgk().zzhb())) {
            bool1 = bool2;
          } else {
            bool1 = false;
          }  
        this.zzapz = Boolean.valueOf(bool1);
      } 
    } 
    return this.zzapz.booleanValue();
  }
}
