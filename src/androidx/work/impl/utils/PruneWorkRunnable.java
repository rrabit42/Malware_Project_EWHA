package androidx.work.impl.utils;

import android.support.annotation.RestrictTo;
import androidx.work.Operation;
import androidx.work.impl.OperationImpl;
import androidx.work.impl.WorkManagerImpl;

@RestrictTo({RestrictTo.Scope.LIBRARY_GROUP})
public class PruneWorkRunnable implements Runnable {
  private final OperationImpl mOperation;
  
  private final WorkManagerImpl mWorkManagerImpl;
  
  public PruneWorkRunnable(WorkManagerImpl paramWorkManagerImpl) {
    this.mWorkManagerImpl = paramWorkManagerImpl;
    this.mOperation = new OperationImpl();
  }
  
  public Operation getOperation() { return this.mOperation; }
  
  public void run() {
    try {
      this.mWorkManagerImpl.getWorkDatabase().workSpecDao().pruneFinishedWorkWithZeroDependentsIgnoringKeepForAtLeast();
      this.mOperation.setState(Operation.SUCCESS);
      return;
    } catch (Throwable throwable) {
      this.mOperation.setState(new Operation.State.FAILURE(throwable));
      return;
    } 
  }
}
