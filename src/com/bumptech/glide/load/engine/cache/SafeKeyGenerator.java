package com.bumptech.glide.load.engine.cache;

import com.bumptech.glide.load.Key;
import com.bumptech.glide.util.LruCache;
import com.bumptech.glide.util.Util;
import java.io.UnsupportedEncodingException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

class SafeKeyGenerator {
  private final LruCache<Key, String> loadIdToSafeHash = new LruCache(1000);
  
  public String getSafeKey(Key paramKey) {
    synchronized (this.loadIdToSafeHash) {
      String str = (String)this.loadIdToSafeHash.get(paramKey);
      if (str == null) {
        try {
          MessageDigest messageDigest = MessageDigest.getInstance("SHA-256");
          paramKey.updateDiskCacheKey(messageDigest);
          String str1 = Util.sha256BytesToHex(messageDigest.digest());
          str = str1;
        } catch (UnsupportedEncodingException null) {
          null.printStackTrace();
        } catch (NoSuchAlgorithmException null) {
          null.printStackTrace();
        } 
        synchronized (this.loadIdToSafeHash) {
          this.loadIdToSafeHash.put(paramKey, str);
          return str;
        } 
      } 
      return str;
    } 
  }
}
