package com.google.android.gms.internal.ads;

import android.content.Context;
import android.util.DisplayMetrics;
import android.view.View;
import android.view.ViewTreeObserver;
import android.view.WindowManager;
import com.google.android.gms.ads.internal.gmsg.zzf;
import com.google.android.gms.ads.internal.zzbc;
import com.google.android.gms.ads.internal.zzbv;
import java.lang.ref.WeakReference;
import javax.annotation.concurrent.GuardedBy;
import org.json.JSONObject;

@zzadh
public final class zzace {
  private final Context mContext;
  
  private final Object mLock = new Object();
  
  @GuardedBy("mLock")
  private int zzadx = -1;
  
  @GuardedBy("mLock")
  private int zzady = -1;
  
  private zzamj zzadz;
  
  private final DisplayMetrics zzagj;
  
  private final zzci zzbjc;
  
  private final zzaji zzbze;
  
  private final zzbc zzcbc;
  
  private ViewTreeObserver.OnGlobalLayoutListener zzcbd;
  
  private ViewTreeObserver.OnScrollChangedListener zzcbe;
  
  private final zznx zzvr;
  
  public zzace(Context paramContext, zzci paramzzci, zzaji paramzzaji, zznx paramzznx, zzbc paramzzbc) {
    this.mContext = paramContext;
    this.zzbjc = paramzzci;
    this.zzbze = paramzzaji;
    this.zzvr = paramzznx;
    this.zzcbc = paramzzbc;
    this.zzadz = new zzamj(200L);
    this.zzagj = zzbv.zzek().zza((WindowManager)paramContext.getSystemService("window"));
  }
  
  private final void zza(WeakReference<zzaqw> paramWeakReference, boolean paramBoolean) {
    if (paramWeakReference == null)
      return; 
    zzaqw zzaqw = (zzaqw)paramWeakReference.get();
    if (zzaqw != null) {
      if (zzaqw.getView() == null)
        return; 
      if (paramBoolean && !this.zzadz.tryAcquire())
        return; 
      View view = zzaqw.getView();
      int[] arrayOfInt = new int[2];
      view.getLocationOnScreen(arrayOfInt);
      zzkb.zzif();
      DisplayMetrics displayMetrics = this.zzagj;
      boolean bool = false;
      int i = zzamu.zzb(displayMetrics, arrayOfInt[0]);
      int j = zzkb.zzif().zzb(this.zzagj, arrayOfInt[1]);
      synchronized (this.mLock) {
        if (this.zzadx != i || this.zzady != j) {
          this.zzadx = i;
          this.zzady = j;
          zzasc zzasc = zzaqw.zzuf();
          i = this.zzadx;
          j = this.zzady;
          if (!paramBoolean)
            bool = true; 
          zzasc.zza(i, j, bool);
        } 
        return;
      } 
    } 
  }
}
