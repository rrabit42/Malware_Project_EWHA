package com.google.android.gms.internal.ads;

import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.text.TextUtils;
import android.util.Log;
import java.util.ArrayList;
import java.util.List;

public final class zzbfw {
  private static String zzedy;
  
  public static String zzbn(Context paramContext) {
    String str = zzedy;
    if (str != null)
      return str; 
    PackageManager packageManager = paramContext.getPackageManager();
    Intent intent = new Intent("android.intent.action.VIEW", Uri.parse("http://www.example.com"));
    ResolveInfo resolveInfo = packageManager.resolveActivity(intent, 0);
    if (resolveInfo != null) {
      String str1 = resolveInfo.activityInfo.packageName;
    } else {
      resolveInfo = null;
    } 
    List list = packageManager.queryIntentActivities(intent, 0);
    ArrayList arrayList = new ArrayList();
    for (ResolveInfo resolveInfo1 : list) {
      Intent intent1 = new Intent();
      intent1.setAction("android.support.customtabs.action.CustomTabsService");
      intent1.setPackage(resolveInfo1.activityInfo.packageName);
      if (packageManager.resolveService(intent1, false) != null)
        arrayList.add(resolveInfo1.activityInfo.packageName); 
    } 
    if (arrayList.isEmpty()) {
      zzedy = null;
    } else {
      String str1;
      if (arrayList.size() == 1) {
        str1 = (String)arrayList.get(0);
      } else {
        if (!TextUtils.isEmpty(resolveInfo) && !zzd(str1, intent) && arrayList.contains(resolveInfo)) {
          zzedy = resolveInfo;
        } else {
          str1 = "com.android.chrome";
          if (arrayList.contains("com.android.chrome"))
            zzedy = str1; 
          str1 = "com.chrome.beta";
          if (arrayList.contains("com.chrome.beta"))
            zzedy = str1; 
          str1 = "com.chrome.dev";
          if (arrayList.contains("com.chrome.dev"))
            zzedy = str1; 
          str1 = "com.google.android.apps.chrome";
          if (arrayList.contains("com.google.android.apps.chrome"))
            zzedy = str1; 
        } 
        return zzedy;
      } 
      zzedy = str1;
    } 
    return zzedy;
  }
  
  private static boolean zzd(Context paramContext, Intent paramIntent) {
    try {
      List list = paramContext.getPackageManager().queryIntentActivities(paramIntent, 64);
      if (list != null) {
        if (list.size() == 0)
          return false; 
        for (ResolveInfo resolveInfo : list) {
          IntentFilter intentFilter = resolveInfo.filter;
          if (intentFilter != null && intentFilter.countDataAuthorities() != 0 && intentFilter.countDataPaths() != 0) {
            ActivityInfo activityInfo = resolveInfo.activityInfo;
            if (activityInfo != null)
              return true; 
          } 
        } 
      } else {
        return false;
      } 
    } catch (RuntimeException paramContext) {
      Log.e("CustomTabsHelper", "Runtime exception while getting specialized handlers");
    } 
    return false;
  }
}
