package com.google.android.gms.measurement.internal;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.support.annotation.MainThread;
import android.support.annotation.WorkerThread;
import com.google.android.gms.common.internal.Preconditions;
import com.google.android.gms.common.util.VisibleForTesting;

class zzbb extends BroadcastReceiver {
  @VisibleForTesting
  private static final String zzabi = "com.google.android.gms.measurement.internal.zzbb";
  
  private boolean zzabj;
  
  private boolean zzabk;
  
  private final zzfo zzamv;
  
  static  {
  
  }
  
  zzbb(zzfo paramzzfo) {
    Preconditions.checkNotNull(paramzzfo);
    this.zzamv = paramzzfo;
  }
  
  @MainThread
  public void onReceive(Context paramContext, Intent paramIntent) {
    this.zzamv.zzlx();
    String str = paramIntent.getAction();
    this.zzamv.zzgt().zzjo().zzg("NetworkBroadcastReceiver received action", str);
    if ("android.net.conn.CONNECTIVITY_CHANGE".equals(str)) {
      boolean bool = this.zzamv.zzlt().zzfb();
      if (this.zzabk != bool) {
        this.zzabk = bool;
        this.zzamv.zzgs().zzc(new zzbc(this, bool));
      } 
      return;
    } 
    this.zzamv.zzgt().zzjj().zzg("NetworkBroadcastReceiver received unknown action", str);
  }
  
  @WorkerThread
  public final void unregister() {
    this.zzamv.zzlx();
    this.zzamv.zzgs().zzaf();
    this.zzamv.zzgs().zzaf();
    if (!this.zzabj)
      return; 
    this.zzamv.zzgt().zzjo().zzby("Unregistering connectivity change receiver");
    this.zzabj = false;
    this.zzabk = false;
    context = this.zzamv.getContext();
    try {
      context.unregisterReceiver(this);
      return;
    } catch (IllegalArgumentException context) {
      this.zzamv.zzgt().zzjg().zzg("Failed to unregister the network broadcast receiver", context);
      return;
    } 
  }
  
  @WorkerThread
  public final void zzey() {
    this.zzamv.zzlx();
    this.zzamv.zzgs().zzaf();
    if (this.zzabj)
      return; 
    this.zzamv.getContext().registerReceiver(this, new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE"));
    this.zzabk = this.zzamv.zzlt().zzfb();
    this.zzamv.zzgt().zzjo().zzg("Registering connectivity change receiver. Network connected", Boolean.valueOf(this.zzabk));
    this.zzabj = true;
  }
}
