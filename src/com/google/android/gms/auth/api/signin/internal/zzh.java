package com.google.android.gms.auth.api.signin.internal;

import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.support.annotation.Nullable;
import com.google.android.gms.auth.api.signin.GoogleSignInAccount;
import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
import com.google.android.gms.auth.api.signin.GoogleSignInResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.OptionalPendingResult;
import com.google.android.gms.common.api.PendingResult;
import com.google.android.gms.common.api.PendingResults;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.common.api.internal.GoogleApiManager;
import com.google.android.gms.common.logging.Logger;
import java.util.Iterator;

public final class zzh {
  private static Logger zzbd = new Logger("GoogleSignInCommon", new String[0]);
  
  @Nullable
  public static GoogleSignInResult getSignInResultFromIntent(Intent paramIntent) {
    if (paramIntent == null || (!paramIntent.hasExtra("googleSignInStatus") && !paramIntent.hasExtra("googleSignInAccount")))
      return null; 
    GoogleSignInAccount googleSignInAccount = (GoogleSignInAccount)paramIntent.getParcelableExtra("googleSignInAccount");
    Status status = (Status)paramIntent.getParcelableExtra("googleSignInStatus");
    if (googleSignInAccount != null)
      status = Status.RESULT_SUCCESS; 
    return new GoogleSignInResult(googleSignInAccount, status);
  }
  
  public static Intent zzc(Context paramContext, GoogleSignInOptions paramGoogleSignInOptions) {
    zzbd.d("getSignInIntent()", new Object[0]);
    SignInConfiguration signInConfiguration = new SignInConfiguration(paramContext.getPackageName(), paramGoogleSignInOptions);
    Intent intent = new Intent("com.google.android.gms.auth.GOOGLE_SIGN_IN");
    intent.setPackage(paramContext.getPackageName());
    intent.setClass(paramContext, SignInHubActivity.class);
    Bundle bundle = new Bundle();
    bundle.putParcelable("config", signInConfiguration);
    intent.putExtra("config", bundle);
    return intent;
  }
  
  public static OptionalPendingResult<GoogleSignInResult> zzc(GoogleApiClient paramGoogleApiClient, Context paramContext, GoogleSignInOptions paramGoogleSignInOptions, boolean paramBoolean) { // Byte code:
    //   0: getstatic com/google/android/gms/auth/api/signin/internal/zzh.zzbd : Lcom/google/android/gms/common/logging/Logger;
    //   3: ldc 'silentSignIn()'
    //   5: iconst_0
    //   6: anewarray java/lang/Object
    //   9: invokevirtual d : (Ljava/lang/String;[Ljava/lang/Object;)V
    //   12: getstatic com/google/android/gms/auth/api/signin/internal/zzh.zzbd : Lcom/google/android/gms/common/logging/Logger;
    //   15: ldc 'getEligibleSavedSignInResult()'
    //   17: iconst_0
    //   18: anewarray java/lang/Object
    //   21: invokevirtual d : (Ljava/lang/String;[Ljava/lang/Object;)V
    //   24: aload_2
    //   25: invokestatic checkNotNull : (Ljava/lang/Object;)Ljava/lang/Object;
    //   28: pop
    //   29: aload_1
    //   30: invokestatic zzd : (Landroid/content/Context;)Lcom/google/android/gms/auth/api/signin/internal/zzp;
    //   33: invokevirtual zzi : ()Lcom/google/android/gms/auth/api/signin/GoogleSignInOptions;
    //   36: astore #5
    //   38: aload #5
    //   40: ifnull -> 199
    //   43: aload #5
    //   45: invokevirtual getAccount : ()Landroid/accounts/Account;
    //   48: astore #6
    //   50: aload_2
    //   51: invokevirtual getAccount : ()Landroid/accounts/Account;
    //   54: astore #7
    //   56: aload #6
    //   58: ifnonnull -> 78
    //   61: aload #7
    //   63: ifnonnull -> 72
    //   66: iconst_1
    //   67: istore #4
    //   69: goto -> 87
    //   72: iconst_0
    //   73: istore #4
    //   75: goto -> 87
    //   78: aload #6
    //   80: aload #7
    //   82: invokevirtual equals : (Ljava/lang/Object;)Z
    //   85: istore #4
    //   87: iload #4
    //   89: ifeq -> 199
    //   92: aload_2
    //   93: invokevirtual isServerAuthCodeRequested : ()Z
    //   96: ifne -> 199
    //   99: aload_2
    //   100: invokevirtual isIdTokenRequested : ()Z
    //   103: ifeq -> 129
    //   106: aload #5
    //   108: invokevirtual isIdTokenRequested : ()Z
    //   111: ifeq -> 199
    //   114: aload_2
    //   115: invokevirtual getServerClientId : ()Ljava/lang/String;
    //   118: aload #5
    //   120: invokevirtual getServerClientId : ()Ljava/lang/String;
    //   123: invokevirtual equals : (Ljava/lang/Object;)Z
    //   126: ifeq -> 199
    //   129: new java/util/HashSet
    //   132: dup
    //   133: aload #5
    //   135: invokevirtual getScopes : ()Ljava/util/ArrayList;
    //   138: invokespecial <init> : (Ljava/util/Collection;)V
    //   141: new java/util/HashSet
    //   144: dup
    //   145: aload_2
    //   146: invokevirtual getScopes : ()Ljava/util/ArrayList;
    //   149: invokespecial <init> : (Ljava/util/Collection;)V
    //   152: invokeinterface containsAll : (Ljava/util/Collection;)Z
    //   157: ifeq -> 199
    //   160: aload_1
    //   161: invokestatic zzd : (Landroid/content/Context;)Lcom/google/android/gms/auth/api/signin/internal/zzp;
    //   164: invokevirtual zzh : ()Lcom/google/android/gms/auth/api/signin/GoogleSignInAccount;
    //   167: astore #5
    //   169: aload #5
    //   171: ifnull -> 199
    //   174: aload #5
    //   176: invokevirtual isExpired : ()Z
    //   179: ifne -> 199
    //   182: new com/google/android/gms/auth/api/signin/GoogleSignInResult
    //   185: dup
    //   186: aload #5
    //   188: getstatic com/google/android/gms/common/api/Status.RESULT_SUCCESS : Lcom/google/android/gms/common/api/Status;
    //   191: invokespecial <init> : (Lcom/google/android/gms/auth/api/signin/GoogleSignInAccount;Lcom/google/android/gms/common/api/Status;)V
    //   194: astore #5
    //   196: goto -> 202
    //   199: aconst_null
    //   200: astore #5
    //   202: aload #5
    //   204: ifnull -> 226
    //   207: getstatic com/google/android/gms/auth/api/signin/internal/zzh.zzbd : Lcom/google/android/gms/common/logging/Logger;
    //   210: ldc 'Eligible saved sign in result found'
    //   212: iconst_0
    //   213: anewarray java/lang/Object
    //   216: invokevirtual d : (Ljava/lang/String;[Ljava/lang/Object;)V
    //   219: aload #5
    //   221: aload_0
    //   222: invokestatic immediatePendingResult : (Lcom/google/android/gms/common/api/Result;Lcom/google/android/gms/common/api/GoogleApiClient;)Lcom/google/android/gms/common/api/OptionalPendingResult;
    //   225: areturn
    //   226: iload_3
    //   227: ifeq -> 251
    //   230: new com/google/android/gms/auth/api/signin/GoogleSignInResult
    //   233: dup
    //   234: aconst_null
    //   235: new com/google/android/gms/common/api/Status
    //   238: dup
    //   239: iconst_4
    //   240: invokespecial <init> : (I)V
    //   243: invokespecial <init> : (Lcom/google/android/gms/auth/api/signin/GoogleSignInAccount;Lcom/google/android/gms/common/api/Status;)V
    //   246: aload_0
    //   247: invokestatic immediatePendingResult : (Lcom/google/android/gms/common/api/Result;Lcom/google/android/gms/common/api/GoogleApiClient;)Lcom/google/android/gms/common/api/OptionalPendingResult;
    //   250: areturn
    //   251: getstatic com/google/android/gms/auth/api/signin/internal/zzh.zzbd : Lcom/google/android/gms/common/logging/Logger;
    //   254: ldc 'trySilentSignIn()'
    //   256: iconst_0
    //   257: anewarray java/lang/Object
    //   260: invokevirtual d : (Ljava/lang/String;[Ljava/lang/Object;)V
    //   263: new com/google/android/gms/common/api/internal/OptionalPendingResultImpl
    //   266: dup
    //   267: aload_0
    //   268: new com/google/android/gms/auth/api/signin/internal/zzi
    //   271: dup
    //   272: aload_0
    //   273: aload_1
    //   274: aload_2
    //   275: invokespecial <init> : (Lcom/google/android/gms/common/api/GoogleApiClient;Landroid/content/Context;Lcom/google/android/gms/auth/api/signin/GoogleSignInOptions;)V
    //   278: invokevirtual enqueue : (Lcom/google/android/gms/common/api/internal/BaseImplementation$ApiMethodImpl;)Lcom/google/android/gms/common/api/internal/BaseImplementation$ApiMethodImpl;
    //   281: invokespecial <init> : (Lcom/google/android/gms/common/api/PendingResult;)V
    //   284: areturn }
  
  public static PendingResult<Status> zzc(GoogleApiClient paramGoogleApiClient, Context paramContext, boolean paramBoolean) {
    zzbd.d("Signing out", new Object[0]);
    zzc(paramContext);
    return paramBoolean ? PendingResults.immediatePendingResult(Status.RESULT_SUCCESS, paramGoogleApiClient) : paramGoogleApiClient.execute(new zzk(paramGoogleApiClient));
  }
  
  private static void zzc(Context paramContext) {
    zzp.zzd(paramContext).clear();
    Iterator iterator = GoogleApiClient.getAllClients().iterator();
    while (iterator.hasNext())
      ((GoogleApiClient)iterator.next()).maybeSignOut(); 
    GoogleApiManager.reportSignOut();
  }
  
  public static Intent zzd(Context paramContext, GoogleSignInOptions paramGoogleSignInOptions) {
    zzbd.d("getFallbackSignInIntent()", new Object[0]);
    Intent intent = zzc(paramContext, paramGoogleSignInOptions);
    intent.setAction("com.google.android.gms.auth.APPAUTH_SIGN_IN");
    return intent;
  }
  
  public static PendingResult<Status> zzd(GoogleApiClient paramGoogleApiClient, Context paramContext, boolean paramBoolean) {
    zzbd.d("Revoking access", new Object[0]);
    String str = Storage.getInstance(paramContext).getSavedRefreshToken();
    zzc(paramContext);
    return paramBoolean ? zzd.zzc(str) : paramGoogleApiClient.execute(new zzm(paramGoogleApiClient));
  }
  
  public static Intent zze(Context paramContext, GoogleSignInOptions paramGoogleSignInOptions) {
    zzbd.d("getNoImplementationSignInIntent()", new Object[0]);
    Intent intent = zzc(paramContext, paramGoogleSignInOptions);
    intent.setAction("com.google.android.gms.auth.NO_IMPL");
    return intent;
  }
}
