package com.google.android.gms.common.images;

import android.content.Context;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Handler;
import android.os.Looper;
import android.widget.ImageView;
import com.google.android.gms.common.internal.Asserts;
import com.google.android.gms.internal.base.zak;
import com.google.android.gms.internal.base.zal;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public final class ImageManager {
  private static final Object zamg = new Object();
  
  private static HashSet<Uri> zamh = new HashSet();
  
  private static ImageManager zami;
  
  private final Context mContext;
  
  private final Handler mHandler;
  
  private final ExecutorService zamj;
  
  private final zaa zamk;
  
  private final zak zaml;
  
  private final Map<zaa, ImageReceiver> zamm;
  
  private final Map<Uri, ImageReceiver> zamn;
  
  private final Map<Uri, Long> zamo;
  
  private ImageManager(Context paramContext, boolean paramBoolean) {
    this.mContext = paramContext.getApplicationContext();
    this.mHandler = new zal(Looper.getMainLooper());
    this.zamj = Executors.newFixedThreadPool(4);
    this.zamk = null;
    this.zaml = new zak();
    this.zamm = new HashMap();
    this.zamn = new HashMap();
    this.zamo = new HashMap();
  }
  
  public static ImageManager create(Context paramContext) {
    if (zami == null)
      zami = new ImageManager(paramContext, false); 
    return zami;
  }
  
  private final Bitmap zaa(zab paramzab) {
    zaa zaa1 = this.zamk;
    return (zaa1 == null) ? null : (Bitmap)zaa1.get(paramzab);
  }
  
  private final void zaa(zaa paramzaa) {
    Asserts.checkMainThread("ImageManager.loadImage() must be called in the main thread");
    (new zac(this, paramzaa)).run();
  }
  
  public final void loadImage(ImageView paramImageView, int paramInt) { zaa(new zac(paramImageView, paramInt)); }
  
  public final void loadImage(ImageView paramImageView, Uri paramUri) { zaa(new zac(paramImageView, paramUri)); }
  
  public final void loadImage(ImageView paramImageView, Uri paramUri, int paramInt) {
    zac zac = new zac(paramImageView, paramUri);
    zac.zamw = paramInt;
    zaa(zac);
  }
  
  public final void loadImage(OnImageLoadedListener paramOnImageLoadedListener, Uri paramUri) { zaa(new zad(paramOnImageLoadedListener, paramUri)); }
  
  public final void loadImage(OnImageLoadedListener paramOnImageLoadedListener, Uri paramUri, int paramInt) {
    zad zad = new zad(paramOnImageLoadedListener, paramUri);
    zad.zamw = paramInt;
    zaa(zad);
  }
}
