package com.google.firebase.iid;

import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.IBinder;
import android.support.annotation.GuardedBy;
import android.support.annotation.VisibleForTesting;
import android.util.Log;
import com.google.android.gms.common.util.concurrent.NamedThreadFactory;
import java.util.ArrayDeque;
import java.util.Queue;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledThreadPoolExecutor;

public final class zzi implements ServiceConnection {
  private final Context zzag;
  
  private final Intent zzah;
  
  private final ScheduledExecutorService zzai;
  
  private final Queue<zze> zzaj = new ArrayDeque();
  
  private zzg zzak;
  
  @GuardedBy("this")
  private boolean zzal = false;
  
  public zzi(Context paramContext, String paramString) { this(paramContext, paramString, new ScheduledThreadPoolExecutor(0, new NamedThreadFactory("Firebase-FirebaseInstanceIdServiceConnection"))); }
  
  @VisibleForTesting
  private zzi(Context paramContext, String paramString, ScheduledExecutorService paramScheduledExecutorService) {
    this.zzag = paramContext.getApplicationContext();
    this.zzah = (new Intent(paramString)).setPackage(this.zzag.getPackageName());
    this.zzai = paramScheduledExecutorService;
  }
  
  private final void zzf() { // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: ldc 'EnhancedIntentService'
    //   4: iconst_3
    //   5: invokestatic isLoggable : (Ljava/lang/String;I)Z
    //   8: ifeq -> 19
    //   11: ldc 'EnhancedIntentService'
    //   13: ldc 'flush queue called'
    //   15: invokestatic d : (Ljava/lang/String;Ljava/lang/String;)I
    //   18: pop
    //   19: aload_0
    //   20: getfield zzaj : Ljava/util/Queue;
    //   23: invokeinterface isEmpty : ()Z
    //   28: ifne -> 230
    //   31: ldc 'EnhancedIntentService'
    //   33: iconst_3
    //   34: invokestatic isLoggable : (Ljava/lang/String;I)Z
    //   37: ifeq -> 48
    //   40: ldc 'EnhancedIntentService'
    //   42: ldc 'found intent to be delivered'
    //   44: invokestatic d : (Ljava/lang/String;Ljava/lang/String;)I
    //   47: pop
    //   48: aload_0
    //   49: getfield zzak : Lcom/google/firebase/iid/zzg;
    //   52: ifnull -> 106
    //   55: aload_0
    //   56: getfield zzak : Lcom/google/firebase/iid/zzg;
    //   59: invokevirtual isBinderAlive : ()Z
    //   62: ifeq -> 106
    //   65: ldc 'EnhancedIntentService'
    //   67: iconst_3
    //   68: invokestatic isLoggable : (Ljava/lang/String;I)Z
    //   71: ifeq -> 82
    //   74: ldc 'EnhancedIntentService'
    //   76: ldc 'binder is alive, sending the intent.'
    //   78: invokestatic d : (Ljava/lang/String;Ljava/lang/String;)I
    //   81: pop
    //   82: aload_0
    //   83: getfield zzaj : Ljava/util/Queue;
    //   86: invokeinterface poll : ()Ljava/lang/Object;
    //   91: checkcast com/google/firebase/iid/zze
    //   94: astore_2
    //   95: aload_0
    //   96: getfield zzak : Lcom/google/firebase/iid/zzg;
    //   99: aload_2
    //   100: invokevirtual zza : (Lcom/google/firebase/iid/zze;)V
    //   103: goto -> 19
    //   106: ldc 'EnhancedIntentService'
    //   108: iconst_3
    //   109: invokestatic isLoggable : (Ljava/lang/String;I)Z
    //   112: ifeq -> 160
    //   115: aload_0
    //   116: getfield zzal : Z
    //   119: ifne -> 244
    //   122: iconst_1
    //   123: istore_1
    //   124: goto -> 127
    //   127: new java/lang/StringBuilder
    //   130: dup
    //   131: bipush #39
    //   133: invokespecial <init> : (I)V
    //   136: astore_2
    //   137: aload_2
    //   138: ldc 'binder is dead. start connection? '
    //   140: invokevirtual append : (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   143: pop
    //   144: aload_2
    //   145: iload_1
    //   146: invokevirtual append : (Z)Ljava/lang/StringBuilder;
    //   149: pop
    //   150: ldc 'EnhancedIntentService'
    //   152: aload_2
    //   153: invokevirtual toString : ()Ljava/lang/String;
    //   156: invokestatic d : (Ljava/lang/String;Ljava/lang/String;)I
    //   159: pop
    //   160: aload_0
    //   161: getfield zzal : Z
    //   164: ifne -> 227
    //   167: aload_0
    //   168: iconst_1
    //   169: putfield zzal : Z
    //   172: invokestatic getInstance : ()Lcom/google/android/gms/common/stats/ConnectionTracker;
    //   175: aload_0
    //   176: getfield zzag : Landroid/content/Context;
    //   179: aload_0
    //   180: getfield zzah : Landroid/content/Intent;
    //   183: aload_0
    //   184: bipush #65
    //   186: invokevirtual bindService : (Landroid/content/Context;Landroid/content/Intent;Landroid/content/ServiceConnection;I)Z
    //   189: istore_1
    //   190: iload_1
    //   191: ifeq -> 197
    //   194: aload_0
    //   195: monitorexit
    //   196: return
    //   197: ldc 'EnhancedIntentService'
    //   199: ldc 'binding to the service failed'
    //   201: invokestatic e : (Ljava/lang/String;Ljava/lang/String;)I
    //   204: pop
    //   205: goto -> 218
    //   208: astore_2
    //   209: ldc 'EnhancedIntentService'
    //   211: ldc 'Exception while binding the service'
    //   213: aload_2
    //   214: invokestatic e : (Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   217: pop
    //   218: aload_0
    //   219: iconst_0
    //   220: putfield zzal : Z
    //   223: aload_0
    //   224: invokespecial zzg : ()V
    //   227: aload_0
    //   228: monitorexit
    //   229: return
    //   230: aload_0
    //   231: monitorexit
    //   232: return
    //   233: astore_2
    //   234: aload_0
    //   235: monitorexit
    //   236: goto -> 241
    //   239: aload_2
    //   240: athrow
    //   241: goto -> 239
    //   244: iconst_0
    //   245: istore_1
    //   246: goto -> 127
    // Exception table:
    //   from	to	target	type
    //   2	19	233	finally
    //   19	48	233	finally
    //   48	82	233	finally
    //   82	103	233	finally
    //   106	122	233	finally
    //   127	160	233	finally
    //   160	172	233	finally
    //   172	190	208	java/lang/SecurityException
    //   172	190	233	finally
    //   197	205	208	java/lang/SecurityException
    //   197	205	233	finally
    //   209	218	233	finally
    //   218	227	233	finally }
  
  @GuardedBy("this")
  private final void zzg() {
    while (!this.zzaj.isEmpty())
      ((zze)this.zzaj.poll()).finish(); 
  }
  
  public final void onServiceConnected(ComponentName paramComponentName, IBinder paramIBinder) { // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: ldc 'EnhancedIntentService'
    //   4: iconst_3
    //   5: invokestatic isLoggable : (Ljava/lang/String;I)Z
    //   8: ifeq -> 57
    //   11: aload_1
    //   12: invokestatic valueOf : (Ljava/lang/Object;)Ljava/lang/String;
    //   15: astore_1
    //   16: new java/lang/StringBuilder
    //   19: dup
    //   20: aload_1
    //   21: invokestatic valueOf : (Ljava/lang/Object;)Ljava/lang/String;
    //   24: invokevirtual length : ()I
    //   27: bipush #20
    //   29: iadd
    //   30: invokespecial <init> : (I)V
    //   33: astore_3
    //   34: aload_3
    //   35: ldc 'onServiceConnected: '
    //   37: invokevirtual append : (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   40: pop
    //   41: aload_3
    //   42: aload_1
    //   43: invokevirtual append : (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   46: pop
    //   47: ldc 'EnhancedIntentService'
    //   49: aload_3
    //   50: invokevirtual toString : ()Ljava/lang/String;
    //   53: invokestatic d : (Ljava/lang/String;Ljava/lang/String;)I
    //   56: pop
    //   57: aload_0
    //   58: iconst_0
    //   59: putfield zzal : Z
    //   62: aload_2
    //   63: instanceof com/google/firebase/iid/zzg
    //   66: ifne -> 122
    //   69: aload_2
    //   70: invokestatic valueOf : (Ljava/lang/Object;)Ljava/lang/String;
    //   73: astore_1
    //   74: new java/lang/StringBuilder
    //   77: dup
    //   78: aload_1
    //   79: invokestatic valueOf : (Ljava/lang/Object;)Ljava/lang/String;
    //   82: invokevirtual length : ()I
    //   85: bipush #28
    //   87: iadd
    //   88: invokespecial <init> : (I)V
    //   91: astore_2
    //   92: aload_2
    //   93: ldc 'Invalid service connection: '
    //   95: invokevirtual append : (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   98: pop
    //   99: aload_2
    //   100: aload_1
    //   101: invokevirtual append : (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   104: pop
    //   105: ldc 'EnhancedIntentService'
    //   107: aload_2
    //   108: invokevirtual toString : ()Ljava/lang/String;
    //   111: invokestatic e : (Ljava/lang/String;Ljava/lang/String;)I
    //   114: pop
    //   115: aload_0
    //   116: invokespecial zzg : ()V
    //   119: aload_0
    //   120: monitorexit
    //   121: return
    //   122: aload_0
    //   123: aload_2
    //   124: checkcast com/google/firebase/iid/zzg
    //   127: putfield zzak : Lcom/google/firebase/iid/zzg;
    //   130: aload_0
    //   131: invokespecial zzf : ()V
    //   134: aload_0
    //   135: monitorexit
    //   136: return
    //   137: astore_1
    //   138: aload_0
    //   139: monitorexit
    //   140: aload_1
    //   141: athrow
    // Exception table:
    //   from	to	target	type
    //   2	57	137	finally
    //   57	119	137	finally
    //   122	134	137	finally }
  
  public final void onServiceDisconnected(ComponentName paramComponentName) {
    if (Log.isLoggable("EnhancedIntentService", 3)) {
      String str;
      StringBuilder stringBuilder = new StringBuilder((str = String.valueOf(paramComponentName)).valueOf(str).length() + 23);
      stringBuilder.append("onServiceDisconnected: ");
      stringBuilder.append(str);
      Log.d("EnhancedIntentService", stringBuilder.toString());
    } 
    zzf();
  }
  
  public final void zza(Intent paramIntent, BroadcastReceiver.PendingResult paramPendingResult) { // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: ldc 'EnhancedIntentService'
    //   4: iconst_3
    //   5: invokestatic isLoggable : (Ljava/lang/String;I)Z
    //   8: ifeq -> 19
    //   11: ldc 'EnhancedIntentService'
    //   13: ldc 'new intent queued in the bind-strategy delivery'
    //   15: invokestatic d : (Ljava/lang/String;Ljava/lang/String;)I
    //   18: pop
    //   19: aload_0
    //   20: getfield zzaj : Ljava/util/Queue;
    //   23: new com/google/firebase/iid/zze
    //   26: dup
    //   27: aload_1
    //   28: aload_2
    //   29: aload_0
    //   30: getfield zzai : Ljava/util/concurrent/ScheduledExecutorService;
    //   33: invokespecial <init> : (Landroid/content/Intent;Landroid/content/BroadcastReceiver$PendingResult;Ljava/util/concurrent/ScheduledExecutorService;)V
    //   36: invokeinterface add : (Ljava/lang/Object;)Z
    //   41: pop
    //   42: aload_0
    //   43: invokespecial zzf : ()V
    //   46: aload_0
    //   47: monitorexit
    //   48: return
    //   49: astore_1
    //   50: aload_0
    //   51: monitorexit
    //   52: aload_1
    //   53: athrow
    // Exception table:
    //   from	to	target	type
    //   2	19	49	finally
    //   19	46	49	finally }
}
