package com.google.android.gms.internal.ads;

import android.annotation.TargetApi;
import android.content.ContentResolver;
import android.content.Context;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.provider.Settings;
import android.support.annotation.Nullable;
import android.text.TextUtils;
import android.util.DisplayMetrics;
import android.util.TypedValue;
import android.view.Display;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.widget.FrameLayout;
import android.widget.TextView;
import com.google.android.gms.common.GoogleApiAvailabilityLight;
import com.google.android.gms.common.util.VisibleForTesting;
import com.google.android.gms.dynamite.DynamiteModule;
import java.math.BigInteger;
import java.net.HttpURLConnection;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.Locale;
import java.util.StringTokenizer;
import java.util.UUID;

@zzadh
public final class zzamu {
  private static final String zzcup;
  
  private static final String zzcuq;
  
  private static final String zzcur;
  
  private static final String zzcus;
  
  private static final String zzcut;
  
  private static final String zzcuu;
  
  public static final Handler zzsy = new Handler(Looper.getMainLooper());
  
  static  {
    zzcup = com.google.android.gms.ads.AdView.class.getName();
    zzcuq = com.google.android.gms.ads.InterstitialAd.class.getName();
    zzcur = com.google.android.gms.ads.doubleclick.PublisherAdView.class.getName();
    zzcus = com.google.android.gms.ads.doubleclick.PublisherInterstitialAd.class.getName();
    zzcut = com.google.android.gms.ads.search.SearchAdView.class.getName();
    zzcuu = com.google.android.gms.ads.AdLoader.class.getName();
  }
  
  public static int zza(Context paramContext, int paramInt) { return zza(paramContext.getResources().getDisplayMetrics(), paramInt); }
  
  public static int zza(DisplayMetrics paramDisplayMetrics, int paramInt) { return (int)TypedValue.applyDimension(1, paramInt, paramDisplayMetrics); }
  
  @Nullable
  @VisibleForTesting
  public static String zza(StackTraceElement[] paramArrayOfStackTraceElement, String paramString) {
    byte b = 0;
    while (true) {
      byte b1 = b + true;
      if (b1 < paramArrayOfStackTraceElement.length) {
        StackTraceElement stackTraceElement = paramArrayOfStackTraceElement[b];
        String str = stackTraceElement.getClassName();
        if ("loadAd".equalsIgnoreCase(stackTraceElement.getMethodName()) && (zzcup.equalsIgnoreCase(str) || zzcuq.equalsIgnoreCase(str) || zzcur.equalsIgnoreCase(str) || zzcus.equalsIgnoreCase(str) || zzcut.equalsIgnoreCase(str) || zzcuu.equalsIgnoreCase(str))) {
          String str1 = paramArrayOfStackTraceElement[b1].getClassName();
          break;
        } 
        b = b1;
        continue;
      } 
      paramArrayOfStackTraceElement = null;
      break;
    } 
    if (paramString != null) {
      StringTokenizer stringTokenizer = new StringTokenizer(paramString, ".");
      StringBuilder stringBuilder = new StringBuilder();
      b = 2;
      if (stringTokenizer.hasMoreElements()) {
        stringBuilder.append(stringTokenizer.nextToken());
        while (b > 0 && stringTokenizer.hasMoreElements()) {
          stringBuilder.append(".");
          stringBuilder.append(stringTokenizer.nextToken());
          b--;
        } 
        paramString = stringBuilder.toString();
      } 
      if (paramArrayOfStackTraceElement != null && !paramArrayOfStackTraceElement.contains(paramString))
        return paramArrayOfStackTraceElement; 
    } 
    return null;
  }
  
  public static void zza(Context paramContext, @Nullable String paramString1, String paramString2, Bundle paramBundle, boolean paramBoolean, zzamx paramzzamx) {
    if (paramBoolean) {
      Context context2 = paramContext.getApplicationContext();
      Context context1 = context2;
      if (context2 == null)
        context1 = paramContext; 
      paramBundle.putString("os", Build.VERSION.RELEASE);
      paramBundle.putString("api", String.valueOf(Build.VERSION.SDK_INT));
      paramBundle.putString("appid", context1.getPackageName());
      String str = paramString1;
      if (paramString1 == null) {
        int i = GoogleApiAvailabilityLight.getInstance().getApkVersion(paramContext);
        StringBuilder stringBuilder = new StringBuilder(20);
        stringBuilder.append(i);
        stringBuilder.append(".12451000");
        str = stringBuilder.toString();
      } 
      paramBundle.putString("js", str);
    } 
    Uri.Builder builder = (new Uri.Builder()).scheme("https").path("//pagead2.googlesyndication.com/pagead/gen_204").appendQueryParameter("id", paramString2);
    for (String paramString2 : paramBundle.keySet())
      builder.appendQueryParameter(paramString2, paramBundle.getString(paramString2)); 
    paramzzamx.zzcz(builder.toString());
  }
  
  private final void zza(ViewGroup paramViewGroup, zzjn paramzzjn, String paramString, int paramInt1, int paramInt2) {
    if (paramViewGroup.getChildCount() != 0)
      return; 
    Context context = paramViewGroup.getContext();
    TextView textView = new TextView(context);
    textView.setGravity(17);
    textView.setText(paramString);
    textView.setTextColor(paramInt1);
    textView.setBackgroundColor(paramInt2);
    FrameLayout frameLayout = new FrameLayout(context);
    frameLayout.setBackgroundColor(paramInt1);
    paramInt1 = zza(context, 3);
    frameLayout.addView(textView, new FrameLayout.LayoutParams(paramzzjn.widthPixels - paramInt1, paramzzjn.heightPixels - paramInt1, 17));
    paramViewGroup.addView(frameLayout, paramzzjn.widthPixels, paramzzjn.heightPixels);
  }
  
  public static void zza(boolean paramBoolean, HttpURLConnection paramHttpURLConnection, @Nullable String paramString) {
    paramHttpURLConnection.setConnectTimeout(60000);
    paramHttpURLConnection.setInstanceFollowRedirects(true);
    paramHttpURLConnection.setReadTimeout(60000);
    if (paramString != null)
      paramHttpURLConnection.setRequestProperty("User-Agent", paramString); 
    paramHttpURLConnection.setUseCaches(false);
  }
  
  public static int zzb(Context paramContext, int paramInt) {
    Display display = ((WindowManager)paramContext.getSystemService("window")).getDefaultDisplay();
    DisplayMetrics displayMetrics = new DisplayMetrics();
    display.getMetrics(displayMetrics);
    return zzb(displayMetrics, paramInt);
  }
  
  public static int zzb(DisplayMetrics paramDisplayMetrics, int paramInt) { return Math.round(paramInt / paramDisplayMetrics.density); }
  
  public static String zzbc(Context paramContext) {
    String str = paramContext.getContentResolver();
    if (str == null) {
      str = null;
    } else {
      str = Settings.Secure.getString(str, "android_id");
    } 
    if (str == null || zzsg())
      str = "emulator"; 
    return zzde(str);
  }
  
  @Nullable
  public static String zzbd(Context paramContext) {
    ContentResolver contentResolver = paramContext.getContentResolver();
    return (contentResolver == null) ? null : Settings.Secure.getString(contentResolver, "android_id");
  }
  
  public static boolean zzbe(Context paramContext) { return (GoogleApiAvailabilityLight.getInstance().isGooglePlayServicesAvailable(paramContext, 12451000) == 0); }
  
  public static int zzbf(Context paramContext) { return DynamiteModule.getRemoteVersion(paramContext, "com.google.android.gms.ads.dynamite"); }
  
  public static int zzbg(Context paramContext) { return DynamiteModule.getLocalVersion(paramContext, "com.google.android.gms.ads.dynamite"); }
  
  public static boolean zzbh(Context paramContext) {
    int i = GoogleApiAvailabilityLight.getInstance().isGooglePlayServicesAvailable(paramContext, 12451000);
    return (i == 0 || i == 2);
  }
  
  public static boolean zzbi(Context paramContext) {
    if ((paramContext.getResources().getConfiguration()).orientation != 2)
      return false; 
    DisplayMetrics displayMetrics = paramContext.getResources().getDisplayMetrics();
    return ((int)(displayMetrics.heightPixels / displayMetrics.density) < 600);
  }
  
  @TargetApi(17)
  public static boolean zzbj(Context paramContext) { // Byte code:
    //   0: aload_0
    //   1: invokevirtual getResources : ()Landroid/content/res/Resources;
    //   4: invokevirtual getDisplayMetrics : ()Landroid/util/DisplayMetrics;
    //   7: astore #5
    //   9: aload_0
    //   10: ldc_w 'window'
    //   13: invokevirtual getSystemService : (Ljava/lang/String;)Ljava/lang/Object;
    //   16: checkcast android/view/WindowManager
    //   19: invokeinterface getDefaultDisplay : ()Landroid/view/Display;
    //   24: astore_0
    //   25: invokestatic isAtLeastJellyBeanMR1 : ()Z
    //   28: ifeq -> 52
    //   31: aload_0
    //   32: aload #5
    //   34: invokevirtual getRealMetrics : (Landroid/util/DisplayMetrics;)V
    //   37: aload #5
    //   39: getfield heightPixels : I
    //   42: istore_1
    //   43: aload #5
    //   45: getfield widthPixels : I
    //   48: istore_2
    //   49: goto -> 108
    //   52: ldc_w android/view/Display
    //   55: ldc_w 'getRawHeight'
    //   58: iconst_0
    //   59: anewarray java/lang/Class
    //   62: invokevirtual getMethod : (Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
    //   65: aload_0
    //   66: iconst_0
    //   67: anewarray java/lang/Object
    //   70: invokevirtual invoke : (Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
    //   73: checkcast java/lang/Integer
    //   76: invokevirtual intValue : ()I
    //   79: istore_1
    //   80: ldc_w android/view/Display
    //   83: ldc_w 'getRawWidth'
    //   86: iconst_0
    //   87: anewarray java/lang/Class
    //   90: invokevirtual getMethod : (Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
    //   93: aload_0
    //   94: iconst_0
    //   95: anewarray java/lang/Object
    //   98: invokevirtual invoke : (Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
    //   101: checkcast java/lang/Integer
    //   104: invokevirtual intValue : ()I
    //   107: istore_2
    //   108: aload_0
    //   109: aload #5
    //   111: invokevirtual getMetrics : (Landroid/util/DisplayMetrics;)V
    //   114: aload #5
    //   116: getfield heightPixels : I
    //   119: istore_3
    //   120: aload #5
    //   122: getfield widthPixels : I
    //   125: istore #4
    //   127: iload_3
    //   128: iload_1
    //   129: if_icmpne -> 140
    //   132: iload #4
    //   134: iload_2
    //   135: if_icmpne -> 140
    //   138: iconst_1
    //   139: ireturn
    //   140: iconst_0
    //   141: ireturn
    //   142: astore_0
    //   143: iconst_0
    //   144: ireturn
    // Exception table:
    //   from	to	target	type
    //   52	108	142	java/lang/Exception }
  
  public static int zzbk(Context paramContext) {
    int i = paramContext.getResources().getIdentifier("navigation_bar_width", "dimen", "android");
    return (i > 0) ? paramContext.getResources().getDimensionPixelSize(i) : 0;
  }
  
  public static Throwable zzc(Throwable paramThrowable) {
    zzna zzna = zznk.zzauj;
    if (((Boolean)zzkb.zzik().zzd(zzna)).booleanValue())
      return paramThrowable; 
    LinkedList linkedList = new LinkedList();
    while (paramThrowable != null) {
      linkedList.push(paramThrowable);
      paramThrowable = paramThrowable.getCause();
    } 
    paramThrowable = null;
    while (!linkedList.isEmpty()) {
      Throwable throwable = (Throwable)linkedList.pop();
      StackTraceElement[] arrayOfStackTraceElement = throwable.getStackTrace();
      ArrayList arrayList = new ArrayList();
      arrayList.add(new StackTraceElement(throwable.getClass().getName(), "<filtered>", "<filtered>", 1));
      int i = arrayOfStackTraceElement.length;
      byte b = 0;
      boolean bool = false;
      while (b < i) {
        StackTraceElement stackTraceElement = arrayOfStackTraceElement[b];
        if (zzdf(stackTraceElement.getClassName())) {
          arrayList.add(stackTraceElement);
          bool = true;
        } else {
          boolean bool1;
          String str = stackTraceElement.getClassName();
          if (!TextUtils.isEmpty(str) && (str.startsWith("android.") || str.startsWith("java."))) {
            bool1 = true;
          } else {
            bool1 = false;
          } 
          if (!bool1)
            stackTraceElement = new StackTraceElement("<filtered>", "<filtered>", "<filtered>", 1); 
          arrayList.add(stackTraceElement);
        } 
        b++;
      } 
      if (bool) {
        if (paramThrowable == null) {
          paramThrowable = new Throwable(throwable.getMessage());
        } else {
          paramThrowable = new Throwable(throwable.getMessage(), paramThrowable);
        } 
        paramThrowable.setStackTrace((StackTraceElement[])arrayList.toArray(new StackTraceElement[0]));
      } 
    } 
    return paramThrowable;
  }
  
  public static String zzde(String paramString) {
    byte b = 0;
    while (true) {
      if (b < 2)
        try {
          MessageDigest messageDigest = MessageDigest.getInstance("MD5");
          messageDigest.update(paramString.getBytes());
          return String.format(Locale.US, "%032X", new Object[] { new BigInteger(1, messageDigest.digest()) });
        } catch (NoSuchAlgorithmException noSuchAlgorithmException) {
          b++;
          continue;
        } catch (ArithmeticException paramString) {
          return null;
        }  
      return null;
    } 
  }
  
  @VisibleForTesting
  public static boolean zzdf(String paramString) {
    if (TextUtils.isEmpty(paramString))
      return false; 
    zzna = zznk.zzauk;
    if (paramString.startsWith((String)zzkb.zzik().zzd(zzna)))
      return true; 
    try {
      return Class.forName(paramString).isAnnotationPresent(zzadh.class);
    } catch (Exception zzna) {
      paramString = String.valueOf(paramString);
      if (paramString.length() != 0) {
        paramString = "Fail to check class type for class ".concat(paramString);
      } else {
        paramString = new String("Fail to check class type for class ");
      } 
      zzane.zza(paramString, zzna);
      return false;
    } 
  }
  
  public static boolean zzsg() { return Build.DEVICE.startsWith("generic"); }
  
  public static boolean zzsh() { return (Looper.myLooper() == Looper.getMainLooper()); }
  
  public static String zzsi() {
    UUID uUID = UUID.randomUUID();
    byte[] arrayOfByte1 = BigInteger.valueOf(uUID.getLeastSignificantBits()).toByteArray();
    byte[] arrayOfByte2 = BigInteger.valueOf(uUID.getMostSignificantBits()).toByteArray();
    String str = (new BigInteger(1, arrayOfByte1)).toString();
    byte b = 0;
    while (true) {
      if (b < 2) {
        try {
          MessageDigest messageDigest = MessageDigest.getInstance("MD5");
          messageDigest.update(arrayOfByte1);
          messageDigest.update(arrayOfByte2);
          byte[] arrayOfByte = new byte[8];
          System.arraycopy(messageDigest.digest(), 0, arrayOfByte, 0, 8);
          String str1 = (new BigInteger(1, arrayOfByte)).toString();
          str = str1;
        } catch (NoSuchAlgorithmException noSuchAlgorithmException) {}
        b++;
        continue;
      } 
      return str;
    } 
  }
  
  public final void zza(Context paramContext, @Nullable String paramString1, String paramString2, Bundle paramBundle, boolean paramBoolean) { zza(paramContext, null, paramString2, paramBundle, true, new zzamv(this)); }
  
  public final void zza(ViewGroup paramViewGroup, zzjn paramzzjn, String paramString) { zza(paramViewGroup, paramzzjn, paramString, -16777216, -1); }
  
  public final void zza(ViewGroup paramViewGroup, zzjn paramzzjn, String paramString1, String paramString2) {
    zzane.zzdk(paramString2);
    zza(paramViewGroup, paramzzjn, paramString1, -65536, -16777216);
  }
}
