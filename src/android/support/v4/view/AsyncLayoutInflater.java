package android.support.v4.view;

import android.content.Context;
import android.os.Handler;
import android.support.annotation.LayoutRes;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.annotation.UiThread;
import android.view.LayoutInflater;
import android.view.ViewGroup;

public final class AsyncLayoutInflater {
  private static final String TAG = "AsyncLayoutInflater";
  
  Handler mHandler;
  
  private Handler.Callback mHandlerCallback = new Object(this);
  
  InflateThread mInflateThread;
  
  LayoutInflater mInflater;
  
  public AsyncLayoutInflater(@NonNull Context paramContext) {
    this.mInflater = new BasicInflater(paramContext);
    this.mHandler = new Handler(this.mHandlerCallback);
    this.mInflateThread = InflateThread.getInstance();
  }
  
  @UiThread
  public void inflate(@LayoutRes int paramInt, @Nullable ViewGroup paramViewGroup, @NonNull OnInflateFinishedListener paramOnInflateFinishedListener) {
    if (paramOnInflateFinishedListener != null) {
      InflateRequest inflateRequest = this.mInflateThread.obtainRequest();
      inflateRequest.inflater = this;
      inflateRequest.resid = paramInt;
      inflateRequest.parent = paramViewGroup;
      inflateRequest.callback = paramOnInflateFinishedListener;
      this.mInflateThread.enqueue(inflateRequest);
      return;
    } 
    throw new NullPointerException("callback argument may not be null!");
  }
}
