package com.android.volley.request;

import com.android.volley.NetworkResponse;
import com.android.volley.Response;
import com.android.volley.error.ParseError;
import com.android.volley.toolbox.HttpHeaderParser;
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.zip.GZIPInputStream;

public class GZipRequest extends StringRequest {
  public GZipRequest(int paramInt, String paramString, Response.Listener<String> paramListener, Response.ErrorListener paramErrorListener) { super(paramInt, paramString, paramListener, paramErrorListener); }
  
  public GZipRequest(String paramString, Response.Listener<String> paramListener, Response.ErrorListener paramErrorListener) { super(paramString, paramListener, paramErrorListener); }
  
  protected Response<String> parseNetworkResponse(NetworkResponse paramNetworkResponse) {
    try {
      GZIPInputStream gZIPInputStream = new GZIPInputStream(new ByteArrayInputStream(paramNetworkResponse.data));
      InputStreamReader inputStreamReader = new InputStreamReader(gZIPInputStream);
      BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
      String str = "";
      while (true) {
        String str1 = bufferedReader.readLine();
        if (str1 != null) {
          StringBuilder stringBuilder = new StringBuilder();
          stringBuilder.append(str);
          stringBuilder.append(str1);
          str = stringBuilder.toString();
          continue;
        } 
        break;
      } 
      inputStreamReader.close();
      bufferedReader.close();
      gZIPInputStream.close();
      return Response.success(str, HttpHeaderParser.parseCacheHeaders(paramNetworkResponse));
    } catch (IOException paramNetworkResponse) {
      return Response.error(new ParseError());
    } 
  }
}
