package com.google.android.gms.internal.ads;

import android.net.TrafficStats;
import android.os.Process;
import android.os.SystemClock;
import java.util.concurrent.BlockingQueue;

public final class zzn extends Thread {
  private final zzm zzaa;
  
  private final zzb zzj;
  
  private final zzaa zzk;
  
  private final BlockingQueue<zzr<?>> zzz;
  
  public zzn(BlockingQueue<zzr<?>> paramBlockingQueue, zzm paramzzm, zzb paramzzb, zzaa paramzzaa) {
    this.zzz = paramBlockingQueue;
    this.zzaa = paramzzm;
    this.zzj = paramzzb;
    this.zzk = paramzzaa;
  }
  
  private final void processRequest() throws InterruptedException {
    long l = SystemClock.elapsedRealtime();
    zzr zzr = (zzr)this.zzz.take();
    try {
      zzr.zzb("network-queue-take");
      zzr.isCanceled();
      TrafficStats.setThreadStatsTag(zzr.zze());
      zzp zzp = this.zzaa.zzc(zzr);
      zzr.zzb("network-http-complete");
      if (zzp.zzac && zzr.zzl()) {
        zzr.zzc("not-modified");
        zzr.zzm();
        return;
      } 
      zzx zzx = zzr.zza(zzp);
      zzr.zzb("network-parse-complete");
      if (zzr.zzh() && zzx.zzbg != null) {
        this.zzj.zza(zzr.getUrl(), zzx.zzbg);
        zzr.zzb("network-cache-written");
      } 
      zzr.zzk();
      this.zzk.zzb(zzr, zzx);
      zzr.zza(zzx);
      return;
    } catch (zzae zzae) {
      zzae.zza(SystemClock.elapsedRealtime() - l);
      this.zzk.zza(zzr, zzae);
    } catch (Exception exception) {
      zzaf.zza(exception, "Unhandled exception %s", new Object[] { exception.toString() });
      zzae zzae = new zzae(exception);
      zzae.zza(SystemClock.elapsedRealtime() - l);
      this.zzk.zza(zzr, zzae);
    } 
    zzr.zzm();
  }
  
  public final void quit() throws InterruptedException {
    this.zzl = true;
    interrupt();
  }
  
  public final void run() throws InterruptedException {
    Process.setThreadPriority(10);
    while (true) {
      try {
        while (true)
          processRequest(); 
        break;
      } catch (InterruptedException interruptedException) {
        if (this.zzl)
          return; 
      } 
    } 
  }
}
