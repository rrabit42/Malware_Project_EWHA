package androidx.work.impl.constraints.trackers;

import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.support.annotation.NonNull;
import android.support.annotation.RestrictTo;
import androidx.work.Logger;

@RestrictTo({RestrictTo.Scope.LIBRARY_GROUP})
public class StorageNotLowTracker extends BroadcastReceiverConstraintTracker<Boolean> {
  private static final String TAG = Logger.tagWithPrefix("StorageNotLowTracker");
  
  public StorageNotLowTracker(Context paramContext) { super(paramContext); }
  
  public Boolean getInitialState() {
    Intent intent = this.mAppContext.registerReceiver(null, getIntentFilter());
    Boolean bool = Boolean.valueOf(true);
    if (intent != null) {
      if (intent.getAction() == null)
        return bool; 
      String str = intent.getAction();
      byte b = -1;
      int i = str.hashCode();
      if (i != -1181163412) {
        if (i == -730838620 && str.equals("android.intent.action.DEVICE_STORAGE_OK"))
          b = 0; 
      } else if (str.equals("android.intent.action.DEVICE_STORAGE_LOW")) {
        b = 1;
      } 
      if (b != 0)
        return (b != 1) ? null : Boolean.valueOf(false); 
    } 
    return bool;
  }
  
  public IntentFilter getIntentFilter() {
    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction("android.intent.action.DEVICE_STORAGE_OK");
    intentFilter.addAction("android.intent.action.DEVICE_STORAGE_LOW");
    return intentFilter;
  }
  
  public void onBroadcastReceive(Context paramContext, @NonNull Intent paramIntent) {
    if (paramIntent.getAction() == null)
      return; 
    Logger.get().debug(TAG, String.format("Received %s", new Object[] { paramIntent.getAction() }), new Throwable[0]);
    String str = paramIntent.getAction();
    byte b = -1;
    int i = str.hashCode();
    if (i != -1181163412) {
      if (i == -730838620 && str.equals("android.intent.action.DEVICE_STORAGE_OK"))
        b = 0; 
    } else if (str.equals("android.intent.action.DEVICE_STORAGE_LOW")) {
      b = 1;
    } 
    if (b != 0) {
      if (b != 1)
        return; 
      setState(Boolean.valueOf(false));
      return;
    } 
    setState(Boolean.valueOf(true));
  }
}
