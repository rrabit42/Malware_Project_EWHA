package com.google.android.gms.internal.ads;

import android.content.Context;
import android.text.TextUtils;
import com.google.android.gms.ads.internal.gmsg.HttpClient;
import com.google.android.gms.ads.internal.gmsg.zzaa;
import com.google.android.gms.ads.internal.gmsg.zzv;
import com.google.android.gms.ads.internal.zzbv;
import com.google.android.gms.common.util.VisibleForTesting;
import java.util.concurrent.CancellationException;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;
import javax.annotation.concurrent.GuardedBy;
import org.json.JSONObject;

@zzadh
public final class zzafa extends zzajx {
  private static final Object sLock;
  
  @VisibleForTesting
  private static final long zzcgc = TimeUnit.SECONDS.toMillis(10L);
  
  @VisibleForTesting
  @GuardedBy("sLock")
  private static boolean zzcgd;
  
  private static zzvf zzcge;
  
  private static HttpClient zzcgf;
  
  private static zzaa zzcgg;
  
  private static zzv<Object> zzcgh;
  
  private final Context mContext;
  
  private final Object zzbzh = new Object();
  
  private final zzadj zzccf;
  
  private final zzaeg zzccg;
  
  private zzhx zzcci;
  
  private zzvs zzcgi;
  
  static  {
    sLock = new Object();
    zzcgd = false;
    zzcge = null;
    zzcgf = null;
    zzcgg = null;
    zzcgh = null;
  }
  
  public zzafa(Context paramContext, zzaeg paramzzaeg, zzadj paramzzadj, zzhx paramzzhx) {
    super(true);
    this.zzccf = paramzzadj;
    this.mContext = paramContext;
    this.zzccg = paramzzaeg;
    this.zzcci = paramzzhx;
    synchronized (sLock) {
      if (!zzcgd) {
        zzcgg = new zzaa();
        zzcgf = new HttpClient(paramContext.getApplicationContext(), paramzzaeg.zzacr);
        zzcgh = new zzafi();
        paramContext = this.mContext.getApplicationContext();
        zzang zzang = this.zzccg.zzacr;
        zzna zzna = zznk.zzaub;
        zzcge = new zzvf(paramContext, zzang, (String)zzkb.zzik().zzd(zzna), new zzafh(), new zzafg());
        zzcgd = true;
      } 
      return;
    } 
  }
  
  private final JSONObject zza(zzaef paramzzaef, String paramString) { throw new RuntimeException("d2j fail translate: java.lang.RuntimeException: can not merge I and Z\n\tat com.googlecode.dex2jar.ir.TypeClass.merge(TypeClass.java:100)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeRef.updateTypeClass(TypeTransformer.java:174)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.provideAs(TypeTransformer.java:780)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.enexpr(TypeTransformer.java:659)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.exExpr(TypeTransformer.java:719)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.exExpr(TypeTransformer.java:703)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.enexpr(TypeTransformer.java:698)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.exExpr(TypeTransformer.java:719)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.exExpr(TypeTransformer.java:703)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.enexpr(TypeTransformer.java:698)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.exExpr(TypeTransformer.java:719)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.exExpr(TypeTransformer.java:703)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.s1stmt(TypeTransformer.java:810)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.sxStmt(TypeTransformer.java:840)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer$TypeAnalyze.analyze(TypeTransformer.java:206)\n\tat com.googlecode.dex2jar.ir.ts.TypeTransformer.transform(TypeTransformer.java:44)\n\tat com.googlecode.d2j.dex.Dex2jar$2.optimize(Dex2jar.java:162)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertCode(Dex2Asm.java:414)\n\tat com.googlecode.d2j.dex.ExDex2Asm.convertCode(ExDex2Asm.java:42)\n\tat com.googlecode.d2j.dex.Dex2jar$2.convertCode(Dex2jar.java:128)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertMethod(Dex2Asm.java:509)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertClass(Dex2Asm.java:406)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertDex(Dex2Asm.java:422)\n\tat com.googlecode.d2j.dex.Dex2jar.doTranslate(Dex2jar.java:172)\n\tat com.googlecode.d2j.dex.Dex2jar.to(Dex2jar.java:272)\n\tat com.googlecode.dex2jar.tools.Dex2jarCmd.doCommandLine(Dex2jarCmd.java:108)\n\tat com.googlecode.dex2jar.tools.BaseCmd.doMain(BaseCmd.java:288)\n\tat com.googlecode.dex2jar.tools.Dex2jarCmd.main(Dex2jarCmd.java:32)\n"); }
  
  protected static void zzb(zzuu paramzzuu) {
    paramzzuu.zza("/loadAd", zzcgg);
    paramzzuu.zza("/fetchHttpRequest", zzcgf);
    paramzzuu.zza("/invalidRequest", zzcgh);
  }
  
  private final zzaej zzc(zzaef paramzzaef) {
    String str = zzbv.zzek().zzrh();
    JSONObject jSONObject = zza(paramzzaef, str);
    if (jSONObject == null)
      return new zzaej(0); 
    long l1 = zzbv.zzer().elapsedRealtime();
    Future future = zzcgg.zzas(str);
    zzamu.zzsy.post(new zzafc(this, jSONObject, str));
    long l2 = zzcgc;
    long l3 = zzbv.zzer().elapsedRealtime();
    try {
      JSONObject jSONObject1 = (JSONObject)future.get(l2 - l3 - l1, TimeUnit.MILLISECONDS);
      if (jSONObject1 == null)
        return new zzaej(-1); 
      zzaej zzaej2 = zzafs.zza(this.mContext, paramzzaef, jSONObject1.toString());
      zzaej zzaej1 = zzaej2;
      if (zzaej2.errorCode != -3) {
        zzaej1 = zzaej2;
        if (TextUtils.isEmpty(zzaej2.zzceo))
          zzaej1 = new zzaej(3); 
      } 
      return zzaej1;
    } catch (CancellationException|InterruptedException paramzzaef) {
      return new zzaej(-1);
    } catch (TimeoutException paramzzaef) {
      return new zzaej(2);
    } catch (ExecutionException paramzzaef) {
      return new zzaej(0);
    } 
  }
  
  protected static void zzc(zzuu paramzzuu) {
    paramzzuu.zzb("/loadAd", zzcgg);
    paramzzuu.zzb("/fetchHttpRequest", zzcgf);
    paramzzuu.zzb("/invalidRequest", zzcgh);
  }
  
  public final void onStop() {
    synchronized (this.zzbzh) {
      zzamu.zzsy.post(new zzaff(this));
      return;
    } 
  }
  
  public final void zzdn() {
    zzakb.zzck("SdkLessAdLoaderBackgroundTask started.");
    String str = zzbv.zzfh().zzab(this.mContext);
    zzaef zzaef = new zzaef(this.zzccg, -1L, zzbv.zzfh().zzz(this.mContext), zzbv.zzfh().zzaa(this.mContext), str);
    zzbv.zzfh().zzg(this.mContext, str);
    zzaej zzaej = zzc(zzaef);
    long l = zzbv.zzer().elapsedRealtime();
    zzaji zzaji = new zzaji(zzaef, zzaej, null, null, zzaej.errorCode, l, zzaej.zzceu, null, this.zzcci);
    zzamu.zzsy.post(new zzafb(this, zzaji));
  }
}
