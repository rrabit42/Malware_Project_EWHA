package com.google.android.gms.internal.ads;

import android.content.Context;
import android.os.Bundle;
import com.google.android.gms.ads.internal.zzbv;
import com.google.android.gms.common.util.VisibleForTesting;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Iterator;

@zzadh
public final class zzajv implements zzgj {
  private final Object lock = new Object();
  
  @VisibleForTesting
  private final zzajr zzcqn;
  
  @VisibleForTesting
  private final HashSet<zzajj> zzcqo = new HashSet();
  
  @VisibleForTesting
  private final HashSet<zzaju> zzcqp = new HashSet();
  
  public zzajv() { this(zzkb.zzih()); }
  
  private zzajv(String paramString) { this.zzcqn = new zzajr(paramString); }
  
  public final Bundle zza(Context paramContext, zzajs paramzzajs, String paramString) {
    synchronized (this.lock) {
      Bundle bundle2 = new Bundle();
      bundle2.putBundle("app", this.zzcqn.zzk(paramContext, paramString));
      Bundle bundle1 = new Bundle();
      for (zzaju zzaju : this.zzcqp)
        bundle1.putBundle(zzaju.zzqm(), zzaju.toBundle()); 
      bundle2.putBundle("slots", bundle1);
      ArrayList arrayList = new ArrayList();
      Iterator iterator = this.zzcqo.iterator();
      while (iterator.hasNext())
        arrayList.add(((zzajj)iterator.next()).toBundle()); 
      bundle2.putParcelableArrayList("ads", arrayList);
      paramzzajs.zza(this.zzcqo);
      this.zzcqo.clear();
      return bundle2;
    } 
  }
  
  public final void zza(zzajj paramzzajj) {
    synchronized (this.lock) {
      this.zzcqo.add(paramzzajj);
      return;
    } 
  }
  
  public final void zza(zzaju paramzzaju) {
    synchronized (this.lock) {
      this.zzcqp.add(paramzzaju);
      return;
    } 
  }
  
  public final void zzb(zzjj paramzzjj, long paramLong) {
    synchronized (this.lock) {
      this.zzcqn.zzb(paramzzjj, paramLong);
      return;
    } 
  }
  
  public final void zzb(HashSet<zzajj> paramHashSet) {
    synchronized (this.lock) {
      this.zzcqo.addAll(paramHashSet);
      return;
    } 
  }
  
  public final void zzh(boolean paramBoolean) {
    long l = zzbv.zzer().currentTimeMillis();
    if (paramBoolean) {
      long l1 = zzbv.zzeo().zzqh().zzrb();
      zzna zzna = zznk.zzayi;
      if (l - l1 > ((Long)zzkb.zzik().zzd(zzna)).longValue()) {
        this.zzcqn.zzcqg = -1;
        return;
      } 
      this.zzcqn.zzcqg = zzbv.zzeo().zzqh().zzrc();
      return;
    } 
    zzbv.zzeo().zzqh().zzj(l);
    zzbv.zzeo().zzqh().zzaf(this.zzcqn.zzcqg);
  }
  
  public final void zzpm() {
    synchronized (this.lock) {
      this.zzcqn.zzpm();
      return;
    } 
  }
  
  public final void zzpn() {
    synchronized (this.lock) {
      this.zzcqn.zzpn();
      return;
    } 
  }
}
