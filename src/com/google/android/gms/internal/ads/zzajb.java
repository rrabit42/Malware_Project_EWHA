package com.google.android.gms.internal.ads;

import android.content.Context;
import android.net.Uri;
import android.text.TextUtils;
import com.google.android.gms.ads.internal.zzbv;
import com.google.android.gms.common.util.VisibleForTesting;

@zzadh
public final class zzajb {
  public static Uri zzb(Uri paramUri, Context paramContext) {
    Uri uri = paramUri;
    if (zzbv.zzfh().zzx(paramContext)) {
      uri = paramUri;
      if (TextUtils.isEmpty(paramUri.getQueryParameter("fbs_aeid"))) {
        String str = zzbv.zzfh().zzab(paramContext);
        uri = zzb(paramUri.toString(), "fbs_aeid", str);
        zzbv.zzfh().zze(paramContext, str);
      } 
    } 
    return uri;
  }
  
  @VisibleForTesting
  private static Uri zzb(String paramString1, String paramString2, String paramString3) {
    int j = paramString1.indexOf("&adurl");
    int i = j;
    if (j == -1)
      i = paramString1.indexOf("?adurl"); 
    if (i != -1) {
      StringBuilder stringBuilder = new StringBuilder(paramString1.substring(0, ++i));
      stringBuilder.append(paramString2);
      stringBuilder.append("=");
      stringBuilder.append(paramString3);
      stringBuilder.append("&");
      stringBuilder.append(paramString1.substring(i));
      return Uri.parse(stringBuilder.toString());
    } 
    return Uri.parse(paramString1).buildUpon().appendQueryParameter(paramString2, paramString3).build();
  }
  
  public static String zzb(String paramString, Context paramContext) {
    String str = paramString;
    if (zzbv.zzfh().zzs(paramContext)) {
      if (TextUtils.isEmpty(paramString))
        return paramString; 
      String str1 = zzbv.zzfh().zzab(paramContext);
      if (str1 == null)
        return paramString; 
      zzna zzna = zznk.zzaxr;
      if (((Boolean)zzkb.zzik().zzd(zzna)).booleanValue()) {
        zzna = zznk.zzaxs;
        String str3 = (String)zzkb.zzik().zzd(zzna);
        String str2 = paramString;
        if (paramString.contains(str3)) {
          if (zzbv.zzek().zzcx(paramString)) {
            zzbv.zzfh().zze(paramContext, str1);
            return paramString.replace(str3, str1);
          } 
          str2 = paramString;
          if (zzbv.zzek().zzcy(paramString)) {
            zzbv.zzfh().zzf(paramContext, str1);
            return paramString.replace(str3, str1);
          } 
        } 
      } else {
        str = paramString;
        if (!paramString.contains("fbs_aeid")) {
          if (zzbv.zzek().zzcx(paramString)) {
            zzbv.zzfh().zze(paramContext, str1);
            return zzb(paramString, "fbs_aeid", str1).toString();
          } 
          str = paramString;
          if (zzbv.zzek().zzcy(paramString)) {
            zzbv.zzfh().zzf(paramContext, str1);
            str = zzb(paramString, "fbs_aeid", str1).toString();
          } 
        } 
      } 
    } 
    return str;
  }
  
  public static String zzc(String paramString, Context paramContext) {
    String str = paramString;
    if (zzbv.zzfh().zzs(paramContext)) {
      if (TextUtils.isEmpty(paramString))
        return paramString; 
      String str1 = zzbv.zzfh().zzab(paramContext);
      if (str1 == null)
        return paramString; 
      if (!zzbv.zzek().zzcy(paramString))
        return paramString; 
      zzna zzna = zznk.zzaxr;
      if (((Boolean)zzkb.zzik().zzd(zzna)).booleanValue()) {
        zzna = zznk.zzaxs;
        String str3 = (String)zzkb.zzik().zzd(zzna);
        String str2 = paramString;
        if (paramString.contains(str3))
          return paramString.replace(str3, str1); 
      } else {
        str = paramString;
        if (!paramString.contains("fbs_aeid"))
          str = zzb(paramString, "fbs_aeid", str1).toString(); 
      } 
    } 
    return str;
  }
}
