package com.google.android.gms.internal.ads;

import android.app.Activity;
import android.content.Context;
import android.net.Uri;
import android.view.MotionEvent;
import android.view.View;

public final class zzci {
  private static final String[] zzrc = { "/aclk", "/pcs/click" };
  
  private String zzqy = "googleads.g.doubleclick.net";
  
  private String zzqz = "/pagead/ads";
  
  private String zzra = "ad.doubleclick.net";
  
  private String[] zzrb = { ".doubleclick.net", ".googleadservices.com", ".googlesyndication.com" };
  
  private zzce zzrd;
  
  public zzci(zzce paramzzce) { this.zzrd = paramzzce; }
  
  private final Uri zza(Uri paramUri, Context paramContext, String paramString, boolean paramBoolean, View paramView, Activity paramActivity) throws zzcj {
    try {
      String str;
      StringBuilder stringBuilder;
      boolean bool = zza(paramUri);
      if (bool) {
        if (paramUri.toString().contains("dc_ms="))
          throw new zzcj("Parameter already exists: dc_ms"); 
      } else if (paramUri.getQueryParameter("ms") != null) {
        throw new zzcj("Query parameter already exists: ms");
      } 
      if (paramBoolean) {
        str = this.zzrd.zza(paramContext, paramString, paramView, paramActivity);
      } else {
        str = this.zzrd.zza(str);
      } 
      if (bool) {
        StringBuilder stringBuilder1;
        paramString = paramUri.toString();
        int k = paramString.indexOf(";adurl");
        if (k != -1) {
          stringBuilder1 = new StringBuilder(paramString.substring(0, ++k));
          stringBuilder1.append("dc_ms");
          stringBuilder1.append("=");
          stringBuilder1.append(str);
          stringBuilder1.append(";");
          stringBuilder1.append(paramString.substring(k));
          return Uri.parse(stringBuilder1.toString());
        } 
        stringBuilder = stringBuilder1.getEncodedPath();
        k = paramString.indexOf(stringBuilder);
        StringBuilder stringBuilder2 = new StringBuilder(paramString.substring(0, stringBuilder.length() + k));
        stringBuilder2.append(";");
        stringBuilder2.append("dc_ms");
        stringBuilder2.append("=");
        stringBuilder2.append(str);
        stringBuilder2.append(";");
        stringBuilder2.append(paramString.substring(k + stringBuilder.length()));
        return Uri.parse(stringBuilder2.toString());
      } 
      paramString = stringBuilder.toString();
      int j = paramString.indexOf("&adurl");
      int i = j;
      if (j == -1)
        i = paramString.indexOf("?adurl"); 
      if (i != -1) {
        stringBuilder = new StringBuilder(paramString.substring(0, ++i));
        stringBuilder.append("ms");
        stringBuilder.append("=");
        stringBuilder.append(str);
        stringBuilder.append("&");
        stringBuilder.append(paramString.substring(i));
        return Uri.parse(stringBuilder.toString());
      } 
      return stringBuilder.buildUpon().appendQueryParameter("ms", str).build();
    } catch (UnsupportedOperationException paramUri) {
      throw new zzcj("Provided Uri is not in a valid state");
    } 
  }
  
  private final boolean zza(Uri paramUri) {
    if (paramUri != null)
      try {
        return paramUri.getHost().equals(this.zzra);
      } catch (NullPointerException paramUri) {
        return false;
      }  
    throw new NullPointerException();
  }
  
  public final Uri zza(Uri paramUri, Context paramContext) throws zzcj { return zza(paramUri, paramContext, null, false, null, null); }
  
  public final Uri zza(Uri paramUri, Context paramContext, View paramView, Activity paramActivity) throws zzcj {
    try {
      return zza(paramUri, paramContext, paramUri.getQueryParameter("ai"), true, paramView, paramActivity);
    } catch (UnsupportedOperationException paramUri) {
      throw new zzcj("Provided Uri is not in a valid state");
    } 
  }
  
  public final void zza(MotionEvent paramMotionEvent) { this.zzrd.zza(paramMotionEvent); }
  
  public final zzce zzaa() { return this.zzrd; }
  
  public final boolean zzb(Uri paramUri) {
    if (paramUri != null)
      try {
        String str = paramUri.getHost();
        String[] arrayOfString = this.zzrb;
        int i = arrayOfString.length;
        for (byte b = 0; b < i; b++) {
          boolean bool = str.endsWith(arrayOfString[b]);
          if (bool)
            return true; 
        } 
        return false;
      } catch (NullPointerException paramUri) {
        return false;
      }  
    NullPointerException nullPointerException = new NullPointerException();
    throw nullPointerException;
  }
  
  public final boolean zzc(Uri paramUri) {
    if (zzb(paramUri))
      for (String str : zzrc) {
        if (paramUri.getPath().endsWith(str))
          return true; 
      }  
    return false;
  }
}
