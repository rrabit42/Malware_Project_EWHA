package android.support.transition;

import android.animation.Animator;
import android.content.Context;
import android.content.res.TypedArray;
import android.content.res.XmlResourceParser;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.v4.content.res.TypedArrayUtils;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;

public abstract class Visibility extends Transition {
  public static final int MODE_IN = 1;
  
  public static final int MODE_OUT = 2;
  
  private static final String PROPNAME_PARENT = "android:visibility:parent";
  
  private static final String PROPNAME_SCREEN_LOCATION = "android:visibility:screenLocation";
  
  static final String PROPNAME_VISIBILITY = "android:visibility:visibility";
  
  private static final String[] sTransitionProperties = { "android:visibility:visibility", "android:visibility:parent" };
  
  private int mMode = 3;
  
  public Visibility() {}
  
  public Visibility(Context paramContext, AttributeSet paramAttributeSet) {
    super(paramContext, paramAttributeSet);
    TypedArray typedArray = paramContext.obtainStyledAttributes(paramAttributeSet, Styleable.VISIBILITY_TRANSITION);
    int i = TypedArrayUtils.getNamedInt(typedArray, (XmlResourceParser)paramAttributeSet, "transitionVisibilityMode", 0, 0);
    typedArray.recycle();
    if (i != 0)
      setMode(i); 
  }
  
  private void captureValues(TransitionValues paramTransitionValues) {
    int i = paramTransitionValues.view.getVisibility();
    paramTransitionValues.values.put("android:visibility:visibility", Integer.valueOf(i));
    paramTransitionValues.values.put("android:visibility:parent", paramTransitionValues.view.getParent());
    int[] arrayOfInt = new int[2];
    paramTransitionValues.view.getLocationOnScreen(arrayOfInt);
    paramTransitionValues.values.put("android:visibility:screenLocation", arrayOfInt);
  }
  
  private VisibilityInfo getVisibilityChangeInfo(TransitionValues paramTransitionValues1, TransitionValues paramTransitionValues2) {
    VisibilityInfo visibilityInfo = new VisibilityInfo();
    visibilityInfo.mVisibilityChange = false;
    visibilityInfo.mFadeIn = false;
    if (paramTransitionValues1 != null && paramTransitionValues1.values.containsKey("android:visibility:visibility")) {
      visibilityInfo.mStartVisibility = ((Integer)paramTransitionValues1.values.get("android:visibility:visibility")).intValue();
      visibilityInfo.mStartParent = (ViewGroup)paramTransitionValues1.values.get("android:visibility:parent");
    } else {
      visibilityInfo.mStartVisibility = -1;
      visibilityInfo.mStartParent = null;
    } 
    if (paramTransitionValues2 != null && paramTransitionValues2.values.containsKey("android:visibility:visibility")) {
      visibilityInfo.mEndVisibility = ((Integer)paramTransitionValues2.values.get("android:visibility:visibility")).intValue();
      visibilityInfo.mEndParent = (ViewGroup)paramTransitionValues2.values.get("android:visibility:parent");
    } else {
      visibilityInfo.mEndVisibility = -1;
      visibilityInfo.mEndParent = null;
    } 
    if (paramTransitionValues1 != null && paramTransitionValues2 != null) {
      if (visibilityInfo.mStartVisibility == visibilityInfo.mEndVisibility && visibilityInfo.mStartParent == visibilityInfo.mEndParent)
        return visibilityInfo; 
      if (visibilityInfo.mStartVisibility != visibilityInfo.mEndVisibility) {
        if (visibilityInfo.mStartVisibility == 0) {
          visibilityInfo.mFadeIn = false;
          visibilityInfo.mVisibilityChange = true;
          return visibilityInfo;
        } 
        if (visibilityInfo.mEndVisibility == 0) {
          visibilityInfo.mFadeIn = true;
          visibilityInfo.mVisibilityChange = true;
          return visibilityInfo;
        } 
      } else {
        if (visibilityInfo.mEndParent == null) {
          visibilityInfo.mFadeIn = false;
          visibilityInfo.mVisibilityChange = true;
          return visibilityInfo;
        } 
        if (visibilityInfo.mStartParent == null) {
          visibilityInfo.mFadeIn = true;
          visibilityInfo.mVisibilityChange = true;
          return visibilityInfo;
        } 
      } 
    } else {
      if (paramTransitionValues1 == null && visibilityInfo.mEndVisibility == 0) {
        visibilityInfo.mFadeIn = true;
        visibilityInfo.mVisibilityChange = true;
        return visibilityInfo;
      } 
      if (paramTransitionValues2 == null && visibilityInfo.mStartVisibility == 0) {
        visibilityInfo.mFadeIn = false;
        visibilityInfo.mVisibilityChange = true;
      } 
    } 
    return visibilityInfo;
  }
  
  public void captureEndValues(@NonNull TransitionValues paramTransitionValues) { captureValues(paramTransitionValues); }
  
  public void captureStartValues(@NonNull TransitionValues paramTransitionValues) { captureValues(paramTransitionValues); }
  
  @Nullable
  public Animator createAnimator(@NonNull ViewGroup paramViewGroup, @Nullable TransitionValues paramTransitionValues1, @Nullable TransitionValues paramTransitionValues2) {
    VisibilityInfo visibilityInfo = getVisibilityChangeInfo(paramTransitionValues1, paramTransitionValues2);
    return (visibilityInfo.mVisibilityChange && (visibilityInfo.mStartParent != null || visibilityInfo.mEndParent != null)) ? (visibilityInfo.mFadeIn ? onAppear(paramViewGroup, paramTransitionValues1, visibilityInfo.mStartVisibility, paramTransitionValues2, visibilityInfo.mEndVisibility) : onDisappear(paramViewGroup, paramTransitionValues1, visibilityInfo.mStartVisibility, paramTransitionValues2, visibilityInfo.mEndVisibility)) : null;
  }
  
  public int getMode() { return this.mMode; }
  
  @Nullable
  public String[] getTransitionProperties() { return sTransitionProperties; }
  
  public boolean isTransitionRequired(TransitionValues paramTransitionValues1, TransitionValues paramTransitionValues2) {
    byte b = 0;
    if (paramTransitionValues1 == null && paramTransitionValues2 == null)
      return false; 
    if (paramTransitionValues1 != null && paramTransitionValues2 != null && paramTransitionValues2.values.containsKey("android:visibility:visibility") != paramTransitionValues1.values.containsKey("android:visibility:visibility"))
      return false; 
    VisibilityInfo visibilityInfo = getVisibilityChangeInfo(paramTransitionValues1, paramTransitionValues2);
    int i = b;
    if (visibilityInfo.mVisibilityChange) {
      if (visibilityInfo.mStartVisibility != 0) {
        i = b;
        return (visibilityInfo.mEndVisibility == 0) ? true : i;
      } 
    } else {
      return i;
    } 
    return true;
  }
  
  public boolean isVisible(TransitionValues paramTransitionValues) {
    byte b = 0;
    if (paramTransitionValues == null)
      return false; 
    int i = ((Integer)paramTransitionValues.values.get("android:visibility:visibility")).intValue();
    View view = (View)paramTransitionValues.values.get("android:visibility:parent");
    int j = b;
    if (i == 0) {
      j = b;
      if (view != null)
        j = 1; 
    } 
    return j;
  }
  
  public Animator onAppear(ViewGroup paramViewGroup, TransitionValues paramTransitionValues1, int paramInt1, TransitionValues paramTransitionValues2, int paramInt2) {
    if ((this.mMode & true) == 1) {
      if (paramTransitionValues2 == null)
        return null; 
      if (paramTransitionValues1 == null) {
        View view = (View)paramTransitionValues2.view.getParent();
        if ((getVisibilityChangeInfo(getMatchedTransitionValues(view, false), getTransitionValues(view, false))).mVisibilityChange)
          return null; 
      } 
      return onAppear(paramViewGroup, paramTransitionValues2.view, paramTransitionValues1, paramTransitionValues2);
    } 
    return null;
  }
  
  public Animator onAppear(ViewGroup paramViewGroup, View paramView, TransitionValues paramTransitionValues1, TransitionValues paramTransitionValues2) { return null; }
  
  public Animator onDisappear(ViewGroup paramViewGroup, TransitionValues paramTransitionValues1, int paramInt1, TransitionValues paramTransitionValues2, int paramInt2) { // Byte code:
    //   0: aload_0
    //   1: getfield mMode : I
    //   4: iconst_2
    //   5: iand
    //   6: iconst_2
    //   7: if_icmpeq -> 12
    //   10: aconst_null
    //   11: areturn
    //   12: aload_2
    //   13: ifnull -> 25
    //   16: aload_2
    //   17: getfield view : Landroid/view/View;
    //   20: astore #7
    //   22: goto -> 28
    //   25: aconst_null
    //   26: astore #7
    //   28: aload #4
    //   30: ifnull -> 43
    //   33: aload #4
    //   35: getfield view : Landroid/view/View;
    //   38: astore #6
    //   40: goto -> 46
    //   43: aconst_null
    //   44: astore #6
    //   46: aload #6
    //   48: ifnull -> 121
    //   51: aload #6
    //   53: invokevirtual getParent : ()Landroid/view/ViewParent;
    //   56: ifnonnull -> 62
    //   59: goto -> 121
    //   62: iload #5
    //   64: iconst_4
    //   65: if_icmpne -> 71
    //   68: goto -> 78
    //   71: aload #7
    //   73: aload #6
    //   75: if_acmpne -> 92
    //   78: aconst_null
    //   79: astore #8
    //   81: aload #6
    //   83: astore #7
    //   85: aload #8
    //   87: astore #6
    //   89: goto -> 264
    //   92: aload_0
    //   93: getfield mCanRemoveViews : Z
    //   96: ifeq -> 102
    //   99: goto -> 145
    //   102: aload_1
    //   103: aload #7
    //   105: aload #7
    //   107: invokevirtual getParent : ()Landroid/view/ViewParent;
    //   110: checkcast android/view/View
    //   113: invokestatic copyViewImage : (Landroid/view/ViewGroup;Landroid/view/View;Landroid/view/View;)Landroid/view/View;
    //   116: astore #6
    //   118: goto -> 126
    //   121: aload #6
    //   123: ifnull -> 132
    //   126: aconst_null
    //   127: astore #7
    //   129: goto -> 264
    //   132: aload #7
    //   134: ifnull -> 257
    //   137: aload #7
    //   139: invokevirtual getParent : ()Landroid/view/ViewParent;
    //   142: ifnonnull -> 152
    //   145: aload #7
    //   147: astore #6
    //   149: goto -> 126
    //   152: aload #7
    //   154: invokevirtual getParent : ()Landroid/view/ViewParent;
    //   157: instanceof android/view/View
    //   160: ifeq -> 257
    //   163: aload #7
    //   165: invokevirtual getParent : ()Landroid/view/ViewParent;
    //   168: checkcast android/view/View
    //   171: astore #6
    //   173: aload_0
    //   174: aload_0
    //   175: aload #6
    //   177: iconst_1
    //   178: invokevirtual getTransitionValues : (Landroid/view/View;Z)Landroid/support/transition/TransitionValues;
    //   181: aload_0
    //   182: aload #6
    //   184: iconst_1
    //   185: invokevirtual getMatchedTransitionValues : (Landroid/view/View;Z)Landroid/support/transition/TransitionValues;
    //   188: invokespecial getVisibilityChangeInfo : (Landroid/support/transition/TransitionValues;Landroid/support/transition/TransitionValues;)Landroid/support/transition/Visibility$VisibilityInfo;
    //   191: getfield mVisibilityChange : Z
    //   194: ifne -> 210
    //   197: aload_1
    //   198: aload #7
    //   200: aload #6
    //   202: invokestatic copyViewImage : (Landroid/view/ViewGroup;Landroid/view/View;Landroid/view/View;)Landroid/view/View;
    //   205: astore #6
    //   207: goto -> 126
    //   210: aload #6
    //   212: invokevirtual getParent : ()Landroid/view/ViewParent;
    //   215: ifnonnull -> 251
    //   218: aload #6
    //   220: invokevirtual getId : ()I
    //   223: istore_3
    //   224: iload_3
    //   225: iconst_m1
    //   226: if_icmpeq -> 251
    //   229: aload_1
    //   230: iload_3
    //   231: invokevirtual findViewById : (I)Landroid/view/View;
    //   234: ifnull -> 251
    //   237: aload_0
    //   238: getfield mCanRemoveViews : Z
    //   241: ifeq -> 251
    //   244: aload #7
    //   246: astore #6
    //   248: goto -> 126
    //   251: aconst_null
    //   252: astore #6
    //   254: goto -> 126
    //   257: aconst_null
    //   258: astore #6
    //   260: aload #6
    //   262: astore #7
    //   264: aload #6
    //   266: ifnull -> 408
    //   269: aload_2
    //   270: ifnull -> 408
    //   273: aload_2
    //   274: getfield values : Ljava/util/Map;
    //   277: ldc 'android:visibility:screenLocation'
    //   279: invokeinterface get : (Ljava/lang/Object;)Ljava/lang/Object;
    //   284: checkcast [I
    //   287: checkcast [I
    //   290: astore #7
    //   292: aload #7
    //   294: iconst_0
    //   295: iaload
    //   296: istore_3
    //   297: aload #7
    //   299: iconst_1
    //   300: iaload
    //   301: istore #5
    //   303: iconst_2
    //   304: newarray int
    //   306: astore #7
    //   308: aload_1
    //   309: aload #7
    //   311: invokevirtual getLocationOnScreen : ([I)V
    //   314: aload #6
    //   316: iload_3
    //   317: aload #7
    //   319: iconst_0
    //   320: iaload
    //   321: isub
    //   322: aload #6
    //   324: invokevirtual getLeft : ()I
    //   327: isub
    //   328: invokevirtual offsetLeftAndRight : (I)V
    //   331: aload #6
    //   333: iload #5
    //   335: aload #7
    //   337: iconst_1
    //   338: iaload
    //   339: isub
    //   340: aload #6
    //   342: invokevirtual getTop : ()I
    //   345: isub
    //   346: invokevirtual offsetTopAndBottom : (I)V
    //   349: aload_1
    //   350: invokestatic getOverlay : (Landroid/view/ViewGroup;)Landroid/support/transition/ViewGroupOverlayImpl;
    //   353: astore #7
    //   355: aload #7
    //   357: aload #6
    //   359: invokeinterface add : (Landroid/view/View;)V
    //   364: aload_0
    //   365: aload_1
    //   366: aload #6
    //   368: aload_2
    //   369: aload #4
    //   371: invokevirtual onDisappear : (Landroid/view/ViewGroup;Landroid/view/View;Landroid/support/transition/TransitionValues;Landroid/support/transition/TransitionValues;)Landroid/animation/Animator;
    //   374: astore_1
    //   375: aload_1
    //   376: ifnonnull -> 390
    //   379: aload #7
    //   381: aload #6
    //   383: invokeinterface remove : (Landroid/view/View;)V
    //   388: aload_1
    //   389: areturn
    //   390: aload_1
    //   391: new android/support/transition/Visibility$1
    //   394: dup
    //   395: aload_0
    //   396: aload #7
    //   398: aload #6
    //   400: invokespecial <init> : (Landroid/support/transition/Visibility;Landroid/support/transition/ViewGroupOverlayImpl;Landroid/view/View;)V
    //   403: invokevirtual addListener : (Landroid/animation/Animator$AnimatorListener;)V
    //   406: aload_1
    //   407: areturn
    //   408: aload #7
    //   410: ifnull -> 479
    //   413: aload #7
    //   415: invokevirtual getVisibility : ()I
    //   418: istore_3
    //   419: aload #7
    //   421: iconst_0
    //   422: invokestatic setTransitionVisibility : (Landroid/view/View;I)V
    //   425: aload_0
    //   426: aload_1
    //   427: aload #7
    //   429: aload_2
    //   430: aload #4
    //   432: invokevirtual onDisappear : (Landroid/view/ViewGroup;Landroid/view/View;Landroid/support/transition/TransitionValues;Landroid/support/transition/TransitionValues;)Landroid/animation/Animator;
    //   435: astore_1
    //   436: aload_1
    //   437: ifnull -> 471
    //   440: new android/support/transition/Visibility$DisappearListener
    //   443: dup
    //   444: aload #7
    //   446: iload #5
    //   448: iconst_1
    //   449: invokespecial <init> : (Landroid/view/View;IZ)V
    //   452: astore_2
    //   453: aload_1
    //   454: aload_2
    //   455: invokevirtual addListener : (Landroid/animation/Animator$AnimatorListener;)V
    //   458: aload_1
    //   459: aload_2
    //   460: invokestatic addPauseListener : (Landroid/animation/Animator;Landroid/animation/AnimatorListenerAdapter;)V
    //   463: aload_0
    //   464: aload_2
    //   465: invokevirtual addListener : (Landroid/support/transition/Transition$TransitionListener;)Landroid/support/transition/Transition;
    //   468: pop
    //   469: aload_1
    //   470: areturn
    //   471: aload #7
    //   473: iload_3
    //   474: invokestatic setTransitionVisibility : (Landroid/view/View;I)V
    //   477: aload_1
    //   478: areturn
    //   479: aconst_null
    //   480: areturn }
  
  public Animator onDisappear(ViewGroup paramViewGroup, View paramView, TransitionValues paramTransitionValues1, TransitionValues paramTransitionValues2) { return null; }
  
  public void setMode(int paramInt) {
    if ((paramInt & 0xFFFFFFFC) == 0) {
      this.mMode = paramInt;
      return;
    } 
    throw new IllegalArgumentException("Only MODE_IN and MODE_OUT flags are allowed");
  }
}
